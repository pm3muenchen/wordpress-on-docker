!function(e){var t={};function o(n){if(t[n])return t[n].exports;var l=t[n]={i:n,l:!1,exports:{}};return e[n].call(l.exports,l,l.exports,o),l.l=!0,l.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)o.d(n,l,function(t){return e[t]}.bind(null,l));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=15)}([function(e,t){e.exports=window.wp.element},function(e,t,o){var n=o(16),l=o(17),c=o(12),i=o(18);e.exports=function(e,t){return n(e)||l(e,t)||c(e,t)||i()}},function(e,t){e.exports=window.regeneratorRuntime},function(e,t,o){var n=o(19),l=o(20),c=o(12),i=o(21);e.exports=function(e){return n(e)||l(e)||c(e)||i()}},function(e,t){function o(e,t,o,n,l,c,i){try{var a=e[c](i),r=a.value}catch(e){return void o(e)}a.done?t(r):Promise.resolve(r).then(n,l)}e.exports=function(e){return function(){var t=this,n=arguments;return new Promise((function(l,c){var i=e.apply(t,n);function a(e){o(i,l,c,a,r,"next",e)}function r(e){o(i,l,c,a,r,"throw",e)}a(void 0)}))}}},function(e,t){function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=o=function(e){return typeof e}:e.exports=o=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(t)}e.exports=o},function(e,t,o){"use strict";o.d(t,"b",(function(){return i})),o.d(t,"a",(function(){return a}));var n=o(5),l=o.n(n),c=o(0);function i(e){if(!e)return!1;for(var t=!1,o=0,n=Object.keys(e);o<n.length;o++){var c=n[o];if(e[c]&&"object"===l()(e[c])){var i=e[c];if(Array.isArray(i)&&i.length){t=!0;break}if("postMeta"===c&&i.key){t=!0;break}}else{if(e[c].length&&"string"==typeof e[c]){t=!0;break}if(!0===e[c]&&"boolean"==typeof e[c]){t=!0;break}}}return t}function a(){return Object(c.createElement)("svg",{className:"conditional-blocks-svg",width:"20",viewBox:"0 0 296 358",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Object(c.createElement)("path",{d:"M153.006 233.896V108.708C153.006 101.03 146.789 94.7988 139.097 94.7988H13.9095C6.21763 94.7988 0 101.03 0 108.708V233.896C0 241.574 6.21763 247.805 13.9095 247.805H139.097C146.789 247.805 153.006 241.574 153.006 233.896ZM83.4575 206.076H55.6379C47.946 206.076 41.7284 199.845 41.7284 192.166C41.7284 184.488 47.946 178.257 55.6379 178.257H83.4575C91.1493 178.257 97.367 184.488 97.367 192.166C97.367 199.845 91.1493 206.076 83.4575 206.076ZM97.367 164.347H55.6379C47.946 164.347 41.7284 158.116 41.7284 150.437C41.7284 142.759 47.946 136.528 55.6379 136.528H97.367C105.059 136.528 111.276 142.759 111.276 150.437C111.276 158.116 105.059 164.347 97.367 164.347Z",fill:"#2F2F2F"}),Object(c.createElement)("path",{d:"M66.8594 71.8152C96.0928 43.5248 162.002 38.3966 204.247 56.3842L199.605 57.9365C191.63 60.5994 187.324 69.2129 189.987 77.1874C192.102 83.5639 198.037 87.5964 204.414 87.5964C206.011 87.5964 207.624 87.3375 209.222 86.8053L243.706 75.3156C243.873 75.2549 243.995 75.118 244.162 75.0566C245.06 74.7221 245.821 74.1286 246.658 73.6107C247.586 73.0479 248.545 72.5606 249.306 71.8302C249.443 71.7082 249.611 71.6625 249.748 71.5413C250.265 71.0084 250.478 70.3393 250.904 69.7458C251.558 68.8634 252.228 68.0416 252.685 67.0372C253.095 66.1242 253.247 65.1654 253.461 64.2067C253.674 63.263 253.948 62.3806 253.978 61.4218C254.024 60.2955 253.78 59.2304 253.582 58.1198C253.445 57.435 253.551 56.7502 253.323 56.0654L238.105 10.4116C235.442 2.43714 226.92 -1.88428 218.854 0.7936C210.896 3.44152 206.589 12.0701 209.236 20.0445L211.413 26.5274C158.03 5.86117 83.2947 13.561 45.691 49.947C39.6647 55.7757 39.4971 65.4237 45.3407 71.465C51.2001 77.492 60.8181 77.6746 66.8594 71.8152Z",fill:"#2F2F2F"}),Object(c.createElement)("path",{d:"M228.187 285.612C198.954 313.903 133.045 319.031 90.8 301.043L106.627 295.763C114.586 293.115 118.893 284.486 116.245 276.512C113.582 268.553 105.029 264.216 96.994 266.894L51.3402 282.111C51.1576 282.172 51.0513 282.309 50.8837 282.37C49.9249 282.721 49.1181 283.344 48.2357 283.892C47.3683 284.44 46.4702 284.896 45.7398 285.596C45.6028 285.718 45.4352 285.748 45.2982 285.885C44.781 286.418 44.5677 287.087 44.1419 287.68C43.4877 288.563 42.8179 289.385 42.3614 290.389C41.9505 291.302 41.7985 292.261 41.5853 293.219C41.372 294.148 41.098 295.031 41.0681 296.004C41.0224 297.131 41.2657 298.196 41.464 299.306C41.601 299.991 41.4947 300.676 41.7229 301.361L56.9406 347.015C59.0714 353.391 64.9907 357.424 71.3672 357.424C72.9651 357.424 74.578 357.18 76.1915 356.633C84.1503 353.985 88.4574 345.356 85.8095 337.382L83.6331 330.899C102.99 338.386 125.056 342.267 147.244 342.267C186.263 342.267 225.372 330.671 249.356 307.478C255.383 301.65 255.55 292.002 249.707 285.961C243.861 279.936 234.244 279.769 228.187 285.612Z",fill:"#2F2F2F"}),Object(c.createElement)("path",{d:"M284.295 128.113H185.356C179.277 128.113 174.363 133.038 174.363 139.106V238.045C174.363 244.113 179.277 249.037 185.356 249.037H284.295C290.374 249.037 295.287 244.113 295.287 238.045V139.106C295.287 133.038 290.374 128.113 284.295 128.113ZM240.322 216.058H218.335C212.256 216.058 207.342 211.133 207.342 205.065C207.342 198.997 212.256 194.072 218.335 194.072H240.322C246.401 194.072 251.315 198.997 251.315 205.065C251.315 211.133 246.401 216.058 240.322 216.058ZM251.315 183.079H218.336C212.257 183.079 207.343 178.154 207.343 172.086C207.343 166.017 212.257 161.093 218.336 161.093H251.315C257.394 161.093 262.308 166.017 262.308 172.086C262.308 178.154 257.394 183.079 251.315 183.079Z",fill:"#4E4E4E"}))}},function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},function(e,t,o){"use strict";var n=o(2),l=o.n(n),c=o(4),i=o.n(c),a=o(5),r=o.n(a),s=o(7),d=o.n(s),b=o(1),u=o.n(b),m=o(10),p=o.n(m);function v(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function f(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?v(Object(o),!0).forEach((function(t){d()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):v(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var O=wp.element.useState;t.a=function(){var e=O(cbLocalized),t=u()(e,2),o=t[0],n=t[1],c=O(-1!==window.location.href.indexOf(".local")),a=u()(c,2),s=a[0],d=a[1],b=O(!1),m=u()(b,2),v=m[0],k=m[1];function h(e,t){var o=f(f({},e),t);return Object.keys(o).forEach((function(n){var l=e[n],c=t[n];"object"===r()(l)&&"object"===r()(c)&&(o[n]=h(l,c))})),o}return{cbState:o,get:function(e,t){var n;return e&&t?!!(null==o||null===(n=o[e])||void 0===n?void 0:n[t])&&o[e][t]:e?!!(null==o?void 0:o[e])&&o[e]:o},update:function(){var e=i()(l.a.mark((function e(t){var c,i,a=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=!(a.length>1&&void 0!==a[1])||a[1],k(!0),i=c?h(f({},o),t):f(f({},o),t),n(i),e.next=6,p()({path:"conditional-blocks/v1/update",method:"POST",data:f({},i)}).then((function(e){s&&console.log(e)}));case 6:k(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),convertLegacyConditions:function(){var e=i()(l.a.mark((function e(t){var o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p()({path:"conditional-blocks/v1/convert-legacy-conditions",method:"POST",data:{legacyConditions:t}}).then((function(e){return e}));case 2:return o=e.sent,e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uuid4:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))},isDevMode:s,toggleDevMode:function(){d(!s)},isSaving:v}}},function(e,t,o){"use strict";var n=o(1),l=o.n(n),c=o(0),i=wp.components,a=i.Button,r=i.ButtonGroup,s=i.Popover,d=wp.i18n.__,b=wp.element.useState;t.a=function(e){e.className;var t=e.onConfirm,o=void 0===t?null:t,n=e.buttonText,i=void 0===n?d("Remove","conditional-blocks"):n,u=e.PopoverText,m=void 0===u?d("Are you sure? This cannot be undone.","conditional-blocks"):u,p=e.confirmText,v=void 0===p?d("Yes, delete","conditional-blocks"):p,f=e.cancelText,O=void 0===f?d("Cancel","conditional-blocks"):f,k=b(!1),h=l()(k,2),j=h[0],y=h[1];return Object(c.createElement)(a,{className:"conditional-blocks-builder-modal__delete_button",icon:"remove",isSmall:!0,isSecondary:!0,isDestructive:!0,onClick:function(){y(!j)}},i,j&&Object(c.createElement)(s,{onClose:function(){y(!1)},onFocusOutside:function(){y(!1)},noArrow:!1,className:"conditional-blocks-builder-modal__popover"},Object(c.createElement)("div",{className:"conditional-blocks-builder-modal__row"},m),Object(c.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(c.createElement)(r,{className:"conditional-blocks-builder-modal__button_group"},Object(c.createElement)(a,{isSecondary:!0,isDestructive:!0,onClick:function(){"function"==typeof o&&o()}},v),Object(c.createElement)(a,{isSecondary:!0,onClick:function(){y(!1)}},O)))))}},function(e,t){e.exports=window.wp.apiFetch},function(e,t,o){"use strict";o.d(t,"a",(function(){return k}));var n=o(0),l=o(8),c=o(9),i=wp.i18n.__,a=wp.element.Fragment,r=wp.compose.useInstanceId,s=wp.components,d=s.TextControl,b=s.TimePicker,u=s.SelectControl,m=s.Button,p=s.CheckboxControl,v=s.TextareaControl,f=s.RadioControl,O=s.ExternalLink;function k(e){var t=e.className,o=e.conditions,s=void 0===o?[]:o,h=e.onChange,j=void 0===h?null:h,y=e.isPreset,E=void 0!==y&&y,g=Object(l.a)(),_=r(k);s=JSON.parse(JSON.stringify(s));var w=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{id:e||g.uuid4(),type:!1}},C=function(e){"function"==typeof j&&j(e)},x=function(){var e,t,o,n,l,c,a,r,s,d,b=(null===(e=cbLocalized)||void 0===e?void 0:e.isPro)?"":" - ".concat(i("Pro","conditional-blocks")),u=[{value:null,label:i("Select a condition","conditional-blocks")},{value:"responsiveScreenSizes",label:i("Responsive (Screens sizes)","conditional-blocks"),disabled:E},{value:"userLoggedIn",label:i("User Logged In","conditional-blocks")},{value:"userLoggedOut",label:i("User Logged Out","conditional-blocks")},{value:"dateRange",label:i("Date Range","conditional-blocks")+b,disabled:!(null===(t=cbLocalized)||void 0===t?void 0:t.isPro)},{value:"postMeta",label:i("Post Meta Data","conditional-blocks")+b,disabled:!(null===(o=cbLocalized)||void 0===o?void 0:o.isPro)},{value:"userRoles",label:i("User Roles","conditional-blocks")+b,disabled:!(null===(n=cbLocalized)||void 0===n?void 0:n.isPro)},{value:"queryStrings",label:i("Query Strings","conditional-blocks")+b,disabled:!(null===(l=cbLocalized)||void 0===l?void 0:l.isPro)},{value:"domainReferrers",label:i("Domain Referrers","conditional-blocks")+b,disabled:!(null===(c=cbLocalized)||void 0===c?void 0:c.isPro)},{value:"postIds",label:i("Post IDs","conditional-blocks")+b,disabled:!(null===(a=cbLocalized)||void 0===a?void 0:a.isPro)},{value:"userAgents",label:i("User Agents (Devices)","conditional-blocks")+b,disabled:!(null===(r=cbLocalized)||void 0===r?void 0:r.isPro)},{value:"phpLogic",label:i("PHP Logic","conditional-blocks")+b,disabled:!(null===(s=cbLocalized)||void 0===s?void 0:s.isPro)}];E||u.push({value:"presets",label:i("Presets (from Preset Manager)","conditional-blocks")+b,disabled:!(null===(d=cbLocalized)||void 0===d?void 0:d.isPro)});return u},S=Object.keys(s);return Object(n.createElement)("div",{className:t},Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__condition_builder_wrapper"},!S.length&&Object(n.createElement)(a,null,Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__single_condition-wrapper conditional-blocks-builder-modal__no_conditions"},Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__single_condition"},Object(n.createElement)("p",null,i("Add your first condition to get started.","conditional-blocks"))))),S.map((function(e,t){var o,l,r,m,k,h=s[t];return Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row",key:h.id+_},Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__single_condition-wrapper"},Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__single_condition"},Object(n.createElement)(u,{label:i("Condition Type:","conditional-blocks"),value:h.type,onChange:function(e){var o,n=Array.from(s);n[t]=w(!!(null===(o=n[t])||void 0===o?void 0:o.id)&&n[t].id),n[t].type=e,"dateRange"===e&&(n[t].startTime=Math.floor(Date.now()/1e3),n[t].endTime=Math.floor(Date.now()/1e3)),C(n)},options:x()}),"userLoggedIn"===h.type&&Object(n.createElement)("p",null,i("The selected block will only be visible to users who are logged into the site.","conditional-blocks")),"userLoggedOut"===h.type&&Object(n.createElement)("p",null,i("The selected block will only be visible to users who aren't logged into the site.","conditional-blocks")),"presets"===h.type&&Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("p",null,i("Select a Preset. Presets are conditons that can be shared by multiple blocks. You can edit presets from the Preset Manager.","conditional-blocks"))),Object(n.createElement)(u,{className:"conditional-blocks-builder-modal__role_select",multiple:!0,value:null==h?void 0:h.presets,onChange:function(e){var o=Array.from(s);o[t].presets=e,C(o)},options:(m=[],k=g.get("presets"),(Array.isArray(k)?k:[]).forEach((function(e){return m.push({value:e.id,label:e.name})})),m)})),"userRoles"===h.type&&Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("p",null,i("Block is only visible signed in users who have the selected roles.","conditional-blocks"))),Object(n.createElement)(u,{className:"conditional-blocks-builder-modal__role_select",multiple:!0,value:null==h?void 0:h.allowedRoles,onChange:function(e){var o=Array.from(s);o[t].allowedRoles=e,C(o)},options:g.get("roles")||[]})),"userAgents"===h.type&&Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("p",null,i("The block is only visible to users who are viewing blocks from the selected devices.","conditional-blocks")),Object(n.createElement)(u,{className:"conditional-blocks-builder-modal__role_select",multiple:!0,value:null==h?void 0:h.allowedAgents,onChange:function(e){var o=Array.from(s);o[t].allowedAgents=e,C(o)},options:[{label:"iPhone",value:"iphone"},{label:"Android Device",value:"android"},{label:"MacOS",value:"macintosh"},{label:"Windows",value:"windows"},{label:"Linux",value:"linux"}]}),Object(n.createElement)("p",null,i("Hold the CONTORL key to select multiple.","conditonal-blocks"))),"postMeta"===h.type&&Object(n.createElement)(a,null,Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(d,{label:i("Post Meta Key","conditonal-blocks"),placeholder:"_favourite_site",help:i("Use custom meta key.","conditonal-blocks"),value:(null==h?void 0:h.metaKey)?h.metaKey:"",onChange:function(e){var o=Array.from(s);o[t].metaKey=e,C(o)}})),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(u,{className:"conditional-blocks-builder-modal__role_select",label:i("Select operator","conditional-blocks"),value:(null==h?void 0:h.metaOperator)?h.metaOperator:"",onChange:function(e){var o=Array.from(s);o[t].metaOperator=e,C(o)},options:[{label:"Choose Operator",value:""},{label:"TRUE",value:"true"},{label:"FALSE",value:"false"},{label:"Equals String",value:"==="},{label:"Does Not Equal",value:"!=="}]})),("==="===h.metaOperator||"!=="===h.metaOperator)&&Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(d,{label:i("Post Meta Value","conditonal-blocks"),placeholder:"conditionalblocks.com",help:i("The expected value of your post meta data.","conditonal-blocks"),value:(null==h?void 0:h.metaValue)?h.metaValue:"",onChange:function(e){var o=Array.from(s);o[t].metaValue=e,C(o)}}))),"postIds"===h.type&&Object(n.createElement)(a,null,Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("p",null,i("Each post/page in WordPress has a unique ID. You can use the ID to make sure the block on display on that post.","conditional-blocks")),Object(n.createElement)(f,{label:i("Show the block on post/page:","conditonal-blocks"),selected:(null==h?void 0:h.equal)?h.equal:"equal",options:[{value:"equal",label:i("IDs equal below IDs","conditonal-blocks")},{value:"notEqual",label:i("IDs not equal to below IDs","conditonal-blocks")}],onChange:function(e){var o=Array.from(s);o[t].equal=e,C(o)}})),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(v,{label:i("Post IDs (One per line)","conditional-blocks"),placeholder:"92017\n32020",value:(null==h?void 0:h.postIds)?h.postIds:"",onChange:function(e){var o=Array.from(s);o[t].postIds=e,C(o)}}))),"phpLogic"===h.type&&Object(n.createElement)(a,null,Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("p",null,i("Read more about this condition in the","conditional-blocks")," ",Object(n.createElement)(O,{href:"https://conditionalblocks.com/docs/conditions/show-block-by-php-logic"},i("PHP Logic documentation.","conditional-blocks"))),Object(n.createElement)(v,{label:i("PHP Logic","conditional-blocks"),placeholder:"has_post_thumbnail()",help:i("Add valid PHP conditional tags. The functions must return TRUE for the selected block to be visible. This is a developer feature, use at your own risk.","conditional-blocks"),value:(null==h?void 0:h.phpLogic)?h.phpLogic:"",onChange:function(e){var o=Array.from(s);o[t].phpLogic=e,C(o)}}))),"responsiveScreenSizes"===h.type&&Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("p",null,i("The selected block will automatically hide on screens sizes that aren't selected. You can edit screen widths from the settings tab.","conditional-blocks")),Object(n.createElement)(p,{key:"".concat(_,"_mobile"),label:i("Show on Mobile screens","conditional-blocks"),checked:!!(null==h||null===(o=h.showOn)||void 0===o?void 0:o.includes("showMobileScreen")),onChange:function(e){var o=Array.from(s);if(Array.isArray(o[t].showOn)||(o[t].showOn=[]),e)o[t].showOn.push("showMobileScreen");else{var n=o[t].showOn.indexOf("showMobileScreen");t>-1&&o[t].showOn.splice(n,1)}C(o)}}),Object(n.createElement)(p,{key:"".concat(_,"_tablet"),label:i("Show on Tablet screens","conditional-blocks"),checked:!!(null==h||null===(l=h.showOn)||void 0===l?void 0:l.includes("showTabletScreen")),onChange:function(e){var o=Array.from(s);if(Array.isArray(o[t].showOn)||(o[t].showOn=[]),e)o[t].showOn.push("showTabletScreen");else{var n=o[t].showOn.indexOf("showTabletScreen");t>-1&&o[t].showOn.splice(n,1)}C(o)}}),Object(n.createElement)(p,{key:"".concat(_,"_desktop"),label:i("Show on Desktop screens","conditional-blocks"),checked:!!(null==h||null===(r=h.showOn)||void 0===r?void 0:r.includes("showDesktopScreen")),onChange:function(e){var o=Array.from(s);if(Array.isArray(o[t].showOn)||(o[t].showOn=[]),e)o[t].showOn.push("showDesktopScreen");else{var n=o[t].showOn.indexOf("showDesktopScreen");t>-1&&o[t].showOn.splice(n,1)}C(o)}})),"dateRange"===h.type&&Object(n.createElement)(a,null,Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("p",null,i("Date conditions use the timezone from your WordPress time settings. The selected block will only be visible after the start date. You can optionally select an end date.","conditional-blocks"))),Object(n.createElement)("h4",null,i("Start Date","conditional-blocks")),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(b,{is12Hour:!0,currentTime:1e3*h.startTime,onChange:function(e){var o=Array.from(s);o[t].startTime=Math.floor(new Date(e).getTime()/1e3),C(o)}})),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(p,{label:i("Choose end date?","conditional-blocks"),checked:!!(null==h?void 0:h.hasEndDate),onChange:function(e){var o=Array.from(s);o[t].hasEndDate=e,C(o)}})),(null==h?void 0:h.hasEndDate)&&Object(n.createElement)(a,null,Object(n.createElement)("h4",null,i("End Date","conditional-blocks")),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(b,{is12Hour:!0,currentTime:1e3*h.endTime,onChange:function(e){var o=Array.from(s);o[t].endTime=Math.floor(new Date(e).getTime()/1e3),C(o)}})))),"domainReferrers"===h.type&&Object(n.createElement)(a,null,Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},i("Show the selected block to visitors who have been directed to your page from an another domain. Domain referrers requires third party server to pass the referring information.","conditional-blocks")),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},i("The Query String Condition could be better solution if you don't know that the third-party server is reliable with domain referring.","conditional-blocks")),Object(n.createElement)("h4",null,i("Domain referrers (comma seperate for multiple)","conditional-blocks")),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(v,{placeholder:"conditionalblocks.com, puri.io, google.com",value:(null==h?void 0:h.domainReferrers)?h.domainReferrers:"",onChange:function(e){var o=Array.from(s);o[t].domainReferrers=e,C(o)}}))),"queryStrings"===h.type&&Object(n.createElement)(a,null,Object(n.createElement)("h4",null,i("Query Strings","conditional-blocks")),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},i("Display the selected block for URL queries that contain any of the below strings.","conditional-blocks")),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("p",null,i("One Query String pattern per line.","conditional-blocks")),Object(n.createElement)("h4",null," ",i("Example Usage","conditional-blocks")),Object(n.createElement)("p",null,i("We want to display the selected block for only people who visit the following link on our site","conditional-blocks")," ",Object(n.createElement)(O,{href:"https://conditionalblocks.com/?testing=query-string"},"https://conditionalblocks.com/?testing=query-string&impressed=true")," "),Object(n.createElement)("p",null,i("We can use","conditional-blocks"),Object(n.createElement)("code",null,"testing=query-string")," ",i("as an allowed pattern.","conditional-blocks"))),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)("h4",null," ",i("Allowed Query String Patterns","conditional-blocks")),Object(n.createElement)(v,{help:i("One pattern per line. The block will display if any pattern matches.","conditional-blocks"),placeholder:"testing=query-string\nsuccess=true",value:(null==h?void 0:h.allowedStrings)?h.allowedStrings:"",onChange:function(e){var o=Array.from(s);o[t].allowedStrings=e,C(o)}}))),Object(n.createElement)(c.a,{onConfirm:function(){var e=Array.from(s);e.splice(t,1),C(e)}}))))}))),Object(n.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(n.createElement)(m,{icon:"insert",isSecondary:!0,onClick:function(){var e=Array.from(s);e.push(w()),C(e)}},i("Add condition","conditional-blocks"))))}},function(e,t,o){var n=o(13);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?n(e,t):void 0}}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}},function(e,t){function o(){return e.exports=o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},o.apply(this,arguments)}e.exports=o},function(e,t,o){"use strict";o.r(t);var n=o(14),l=o.n(n),c=o(2),i=o.n(c),a=o(4),r=o.n(a),s=o(1),d=o.n(s),b=o(7),u=o.n(b),m=o(3),p=o.n(m),v=o(0),f=o(8),O=o(11),k=o(6),h=o(9);function j(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function y(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?j(Object(o),!0).forEach((function(t){u()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):j(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var E=wp.i18n.__,g=wp.hooks.addFilter,_=wp.element,w=_.Fragment,C=_.useState,x=wp.blockEditor.InspectorControls,S=wp.compose.createHigherOrderComponent,P=wp.components,N=P.TextControl,A=P.PanelBody,D=P.PanelRow,M=P.Button,T=P.Modal,L=P.CheckboxControl,B=P.TabPanel,z=P.ExternalLink,R=P.Spinner,I=P.Icon;g("blocks.registerBlockType","conditionalBlocks/attributes",(function(e){if(void 0!==e.attributes){e.attributes=Object.assign(e.attributes,{conditionalBlocks:{type:"object",default:{conditions:[]}}})}return e}),1);var q=function(e){var t=wp.data.select("core/block-editor").getSelectedBlock();t.clientId&&wp.data.dispatch("core/block-editor").updateBlockAttributes(t.clientId,{conditionalBlocks:{conditions:p()(e)}},!1)};g("editor.BlockEdit","conditionalBlocks/conditionBuilder",S((function(e){return function(t){var o,n=t.name,l=t.attributes,c=t.isSelected,a=t.setAttributes,s=(null==l?void 0:l.conditionalBlocks)?y({},l.conditionalBlocks):[],b=!!(null==l?void 0:l.conditionalBlocksAttributes)&&y({},l.conditionalBlocksAttributes),u=Array.isArray(null==s?void 0:s.conditions)?Array.from(s.conditions):[],m=C(!1),j=d()(m,2),g=j[0],_=j[1],S=C([]),P=d()(S,2),H=P[0],F=P[1],U=Object(f.a)();if(!g&&!c)return Object(v.createElement)(w,null,Object(v.createElement)(e,t));var V,Z,J,Q=u.length>=1,W=!(Q||!Object(k.b)(b)),Y=(null===(o=cbLocalized)||void 0===o?void 0:o.isPro)&&U.get("presets")?U.get("presets"):[],K=function(e){var t;(null===(t=cbLocalized)||void 0===t?void 0:t.isPro)&&(cbLocalized.presets=e,U.update({presets:e},!1))},G=function(){var e=r()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=5;break}return e.next=3,U.convertLegacyConditions(b);case 3:(t=e.sent)&&(q(t),a({conditionalBlocksAttributes:!1}));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(v.createElement)(w,null,Object(v.createElement)(e,t),g&&Object(v.createElement)(T,{icon:Object(v.createElement)(I,{icon:Object(k.a)(20)}),title:cbLocalized.isPro?"Conditional Blocks Pro":"Conditional Blocks",onRequestClose:function(){return _(!1)},className:"conditional-blocks-builder-modal"},Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__wrapper"},Object(v.createElement)(B,{className:"conditional-blocks-builder-modal__tabs",activeClass:"conditional-blocks-active-tab",tabs:[{name:"tab1",title:"".concat(E("Current Block","conditional-blocks")," - (").concat(n,")"),className:"tab-one",content:Object(v.createElement)("div",null,Object(v.createElement)("h2",null,"Condition Builder"),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(v.createElement)("p",null,E("The selected block will display when the following conditions are met. For examples of all conditions types, how-to guides and more information","conditional-blocks")," ",Object(v.createElement)(z,{href:"https://conditionalblocks.com/docs?cb=builder-link"},E("Read Documentation","conditional-blocks")))),Object(v.createElement)(O.a,{conditions:u,onChange:function(e){q(e)}}),!(null===(J=cbLocalized)||void 0===J?void 0:J.isPro)&&Object(v.createElement)(w,null,Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__pro_notice"},Object(v.createElement)("h4",null,E("Unlock Powerful Conditons Types","conditional-blocks")),Object(v.createElement)("p",null,E("Unlock ALL conditions types and create presets for multiple blocks on your whole site, while supporting development of Conditional Block Pro","conditonal-blocks"),"."),Object(v.createElement)("p",null,Object(v.createElement)(z,{href:"https://conditionalblocks.com/pricing?cb=upgrade-from-free/"},E("Upgrade to Conditional Blocks Pro","conditonal-blocks")))))),U.isDevMode&&Object(v.createElement)("div",null,Object(v.createElement)("div",{className:"conditional-blocks-builder__spacer"}),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__developer_section"},Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("h3",null,"Developer Mode 👩‍💻"),Object(v.createElement)("p",null,Object(v.createElement)("strong",null,E("All blocks and conditions in Developer Mode are created normally. It's safe to use.","conditional-blocks")))),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("h4",null,E("Conditions","conditional-blocks")),Object(v.createElement)("pre",null,JSON.stringify(u,null,2))))))},{name:"tab2",title:E("Preset Manager","conditional-blocks"),className:"tab-two",content:Object(v.createElement)("div",null,Object(v.createElement)("h2",null,E("Preset Manager","conditional-blocks")),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(v.createElement)("p",null,E("Presets are groups of conditions that can be applied across multiple blocks. Presets allow you to apply frequently used groups of conditions to blocks in one place, rather than having to edit each individual block on the site.","conditional-blocks")),Object(v.createElement)("p",null,E("Create and edit your presets here. Presets can then be applied to the selected block using the Condition Builder under the Current Block tab.","conditional-blocks")),(null===(V=cbLocalized)||void 0===V?void 0:V.isPro)&&Object(v.createElement)("p",null,U.isSaving?Object(v.createElement)(w,null,Object(v.createElement)(R,{style:{display:"inline-block"}}),Object(v.createElement)("strong",null,E("Saving changes..","conditional-blocks"))):Object(v.createElement)(w,null,Object(v.createElement)(I,{className:"conditional-blocks__save-icon",icon:"cloud"}),Object(v.createElement)("strong",null,E("Changes to presets save instantly to all blocks with that preset enabled.","conditional-blocks"))))),(null===(Z=cbLocalized)||void 0===Z?void 0:Z.isPro)?Object(v.createElement)(w,null,Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object.keys(Y).map((function(e,t){var o=Y[t];return Object(v.createElement)(A,{className:"conditional-blocks-builder-modal__single_preset",title:o.name,key:o.id,initialOpen:!1},Object(v.createElement)(D,null,Object(v.createElement)(O.a,{isPreset:!0,conditions:Array.isArray(null==o?void 0:o.conditions)?p()(o.conditions):[],onChange:function(e){var o=p()(Y);o[t].conditions=p()(e),K(o)}}),Object(v.createElement)(h.a,{buttonText:E("Remove Preset","conditional-blocks"),onConfirm:function(){var e=p()(Y);e.splice(t,1),K(e)}})))}))),Object(v.createElement)("div",{className:"conditional-blocks-builder__spacer"}),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(v.createElement)("h3",null,E("Create Preset"))),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row"},Object(v.createElement)(N,{label:E("Preset Name","conditional-blocks"),help:E("Give the preset a recognizable name.","conditional-blocks"),value:H,onChange:function(e){F(e)},placeholder:E("My Preset..","conditional-blocks")}),Object(v.createElement)(M,{isSecondary:!0,disabled:!H.length,onClick:function(){var e,t=p()(Y);t.push((e=H,{id:U.uuid4(),type:"preset",name:e,conditions:[]})),K(t),F("")}},E("Create Preset","conditional-blocks")))):Object(v.createElement)(w,null,Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__pro_notice"},Object(v.createElement)("h4",null,E("Unlock Preset Conditons")),Object(v.createElement)("p",null,E("Preset conditons are available in Conditional Blocks Pro. Set multiple conditions inside a preset, then apply the preset to each block. Editing a preset will apply to all blocks with the preset.","conditional-blocks")),Object(v.createElement)("p",null,Object(v.createElement)(z,{href:"https://conditionalblocks.com/pricing?cb=upgrade-from-free"},E("Upgrade to Conditional Blocks Pro","conditional-blocks")))))),U.isDevMode&&Object(v.createElement)("div",null,Object(v.createElement)("div",{className:"conditional-blocks-builder__spacer"}),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__developer_section"},Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("h3",null,"Developer Mode 👩‍💻"),Object(v.createElement)("strong",null,E("All blocks and conditions in Developer Mode are created normally. It's safe to use.","conditional-blocks"))),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("h4",null,"Presets"),Object(v.createElement)("pre",null,JSON.stringify(Y,null,2))))))},{name:"tab3",title:E("Settings","conditional-blocks"),className:"tab-two",content:Object(v.createElement)(w,null,Object(v.createElement)("h2",null,E("Settings")),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("p",null,E("Settings for Conditional Blocks. Looking for more?","conditional-blocks")," ",Object(v.createElement)(z,{href:"https://conditionalblocks.com/docs?cb=builder-link"},E("Read documentation.","conditional-blocks")))),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("h3",null,E("Responsive Blocks","conditional-blocks")),Object(v.createElement)("p",null,E("Change the breakpoints of blocks with the Responsive Condition Type to match your theme's breakpoints if needed.","conditional-blocks"))),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)(N,{label:E("Desktop Minimum (px)","conditional-blocks"),value:U.get("screensizes","device_size_desktop_min"),onChange:function(e){U.update({screensizes:{device_size_desktop_min:e}})},type:"number",placeholder:"1025"})),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)(N,{label:E("Tablet Maximum (px)","conditional-blocks"),value:U.get("screensizes","device_size_tablet_max"),onChange:function(e){U.update({screensizes:{device_size_tablet_max:e}})},placeholder:"1024",type:"number"})),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)(N,{label:E("Tablet Minimum (px)","conditional-blocks"),value:U.get("screensizes","device_size_tablet_min"),onChange:function(e){U.update({screensizes:{device_size_tablet_min:e}})},placeholder:"768",type:"number"})),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)(N,{label:E("Mobile Maximum (px)","conditional-blocks"),value:U.get("screensizes","device_size_mobile_max"),onChange:function(e){U.update({screensizes:{device_size_mobile_max:e}})},placeholder:"767",type:"number"})),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("h3",null,"Developer Mode"),Object(v.createElement)("p",null,"Activate Developer Mode manually or by using a ",Object(v.createElement)("code",null,".local")," domain. Developer Mode provides extra information to help development and debugging."),Object(v.createElement)("p",null,"All blocks and conditions in Developer Mode are created normally. It's safe to use.")),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)(L,{label:"Developer Mode",checked:U.isDevMode,onChange:function(){U.toggleDevMode()}})),U.isDevMode&&Object(v.createElement)("div",null,Object(v.createElement)("div",{className:"conditional-blocks-builder__spacer"}),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__developer_section"},Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("h3",null,"Developer Mode 👩‍💻")),Object(v.createElement)("div",{className:"conditional-blocks-builder-modal__row "},Object(v.createElement)("h4",null,"Settings State"),Object(v.createElement)("pre",null,JSON.stringify(U.cbState,null,2))))))}]},(function(e){return Object(v.createElement)("div",null,e.content)})))),c&&Object(v.createElement)(x,null,Object(v.createElement)(A,{title:"Conditions",icon:k.a,initialOpen:Q||W},Object(v.createElement)(D,null,E("Configure the selected block to display when conditions are met.")),Q&&Object(v.createElement)(w,null,Object(v.createElement)("h4",null,E("Active Block Conditions")),Object.keys(u).map((function(e,t){var o=u[t];return o.type.length?Object(v.createElement)(w,{key:o.id},Object(v.createElement)("div",{className:"conditional-blocks-builder__active_condition_tag"},o.type)):Object(v.createElement)(w,{key:o.id})})),Object(v.createElement)("br",null),Object(v.createElement)("br",null)),Object(v.createElement)(D,null,W&&Object(v.createElement)(M,{isSecondary:!0,onClick:G},E("Convert to 2.0 conditions","conditional-blocks"))||Object(v.createElement)(M,{isSecondary:!0,onClick:function(){return _(!0)}},E("Configure Conditions","conditional-blocks"))))))}}),"withAdvancedControls"),10),g("blocks.registerBlockType","conditionalBlocks/custom/attributes",(function(e){if(void 0!==e.attributes){e.attributes=Object.assign(e.attributes,{conditionalBlocksAttributes:{type:"object",default:{hideOnMobile:!1,hideOnTablet:!1,hideOnDesktop:!1,userState:"",userRoles:[],httpReferer:"",httpUserAgent:[],postMeta:{key:"",value:"",operator:"true"},dates:[]}}})}return e}),1),g("editor.BlockListBlock","conditionalBlocks/editor/blockClasses",S((function(e){return function(t){var o=t.attributes,n=o.conditionalBlocks,c=o.conditionalBlocksAttributes,i=(Array.isArray(null==n?void 0:n.conditions)?n.conditions:[]).length>=1,a=Object(k.b)(c);return i||a?Object(v.createElement)(e,l()({},t,{className:"conditional-blocks-has-conditions"})):Object(v.createElement)(e,t)}}),"withClientIdClassName"))},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],n=!0,l=!1,c=void 0;try{for(var i,a=e[Symbol.iterator]();!(n=(i=a.next()).done)&&(o.push(i.value),!t||o.length!==t);n=!0);}catch(e){l=!0,c=e}finally{try{n||null==a.return||a.return()}finally{if(l)throw c}}return o}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,o){var n=o(13);e.exports=function(e){if(Array.isArray(e))return n(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}]);
//# sourceMappingURL=conditional-blocks-editor.js.map