{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external [\"wp\",\"element\"]","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///external \"regeneratorRuntime\"","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./src/assets/js/helpers/index.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./src/assets/js/stateManager/index.js","webpack:///./src/assets/js/components/ButtonWithConfirm/index.js","webpack:///external [\"wp\",\"apiFetch\"]","webpack:///./src/assets/js/components/ConditionBuilder/index.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/extends.js","webpack:///./src/assets/js/index.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","window","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","arr","arrayWithoutHoles","iterableToArray","nonIterableSpread","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","_typeof","obj","iterator","constructor","isLegacyConditions","conditions","hasCondition","keys","conditionKey","conditionsObject","Array","isArray","length","conditionalBlocksLogo","className","width","viewBox","fill","xmlns","configurable","writable","useState","wp","element","stateManager","cbLocalized","cbState","setcbState","location","href","indexOf","isDevMode","setIsDevMode","isSaving","setIsSaving","deepObjectMerge","target","source","result","forEach","targetProp","sourceProp","optionKey","additionalKey","update","modifed","a","deepMerge","updatedState","apiFetch","path","method","data","res","console","log","convertLegacyConditions","legacyConditions","converted","uuid4","replace","Math","random","toString","toggleDevMode","components","Button","ButtonGroup","Popover","__","i18n","ButtonWithConfirm","onConfirm","buttonText","PopoverText","confirmText","cancelText","isVisible","setIsVisible","icon","isSmall","isSecondary","isDestructive","onClick","onClose","onFocusOutside","noArrow","Fragment","useInstanceId","compose","TextControl","TimePicker","SelectControl","CheckboxControl","TextareaControl","RadioControl","ExternalLink","ConditionBuilder","onChange","isPreset","manager","instanceId","JSON","parse","stringify","blankCondition","inheritId","id","type","handleChange","modifedCondtions","condtionTypes","proLabel","isPro","types","label","disabled","push","conditionKeys","map","index","presetOptions","getPresets","condition","newType","modified","from","startTime","floor","Date","now","endTime","options","multiple","presets","newPresets","preset","allowedRoles","newRoles","allowedAgents","newValue","placeholder","help","metaKey","nextValue","metaOperator","metaValue","selected","equal","option","postIds","phpLogic","checked","showOn","includes","findIndex","splice","is12Hour","currentTime","newTime","getTime","hasEndDate","domainReferrers","allowedStrings","arrayLikeToArray","minLen","slice","test","len","arr2","_extends","assign","addFilter","hooks","InspectorControls","blockEditor","createHigherOrderComponent","PanelBody","PanelRow","Modal","TabPanel","Spinner","Icon","settings","attributes","conditionalBlocks","default","saveConditions","newCondtions","block","select","getSelectedBlock","clientId","dispatch","updateBlockAttributes","BlockEdit","props","isSelected","setAttributes","conditionalBlocksAttributes","currentConditions","isOpen","setOpen","createPresetName","setCreatePresetName","blockHasConditions","requiresConversion","savePresets","convertConditions","title","onRequestClose","activeClass","tabs","content","updatedCondtions","style","display","initialOpen","modifedPresets","prefilledName","modifiedPresets","screensizes","device_size_desktop_min","device_size_tablet_max","device_size_tablet_min","device_size_mobile_max","tab","hideOnMobile","hideOnTablet","hideOnDesktop","userState","userRoles","httpReferer","httpUserAgent","postMeta","operator","dates","BlockListBlock","isLegacy","_arr","_n","_d","_e","_s","_i","next","TypeError","iter"],"mappings":"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","file":"conditional-blocks-editor.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","(function() { module.exports = window[\"wp\"][\"element\"]; }());","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","(function() { module.exports = window[\"regeneratorRuntime\"]; }());","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","/**\n * Loop over the conditions attribute object. Return true if block has conditions.\n *\n * @param {Object} conditions condtions object of block attributes.\n *\n * @return {boolean} hasCondition true or false.\n */\nexport function isLegacyConditions(conditions) {\n\tif (!conditions) {\n\t\treturn false;\n\t}\n\n\tlet hasCondition = false;\n\n\tconst conditionKeys = Object.keys(conditions);\n\n\t// eslint-disable-next-line no-restricted-syntax\n\tfor (const conditionKey of conditionKeys) {\n\t\t// Check for object as key value.\n\t\tif (conditions[conditionKey] && typeof conditions[conditionKey] === 'object') {\n\t\t\tconst conditionsObject = conditions[conditionKey];\n\n\t\t\tif (Array.isArray(conditionsObject) && conditionsObject.length) {\n\t\t\t\thasCondition = true;\n\t\t\t\tbreak;\n\t\t\t} else if (conditionKey === 'postMeta' && conditionsObject.key) {\n\t\t\t\thasCondition = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} else if (conditions[conditionKey].length && typeof conditions[conditionKey] === 'string') {\n\t\t\thasCondition = true;\n\t\t\tbreak;\n\t\t} else if (conditions[conditionKey] === true && typeof conditions[conditionKey] === 'boolean') {\n\t\t\thasCondition = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\treturn hasCondition;\n}\n\n/**\n * Conditional Blocks Logo.\n */\nexport function conditionalBlocksLogo() {\n\treturn (\n\t\t<svg className=\"conditional-blocks-svg\" width=\"20\" viewBox=\"0 0 296 358\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t<path\n\t\t\t\td=\"M153.006 233.896V108.708C153.006 101.03 146.789 94.7988 139.097 94.7988H13.9095C6.21763 94.7988 0 101.03 0 108.708V233.896C0 241.574 6.21763 247.805 13.9095 247.805H139.097C146.789 247.805 153.006 241.574 153.006 233.896ZM83.4575 206.076H55.6379C47.946 206.076 41.7284 199.845 41.7284 192.166C41.7284 184.488 47.946 178.257 55.6379 178.257H83.4575C91.1493 178.257 97.367 184.488 97.367 192.166C97.367 199.845 91.1493 206.076 83.4575 206.076ZM97.367 164.347H55.6379C47.946 164.347 41.7284 158.116 41.7284 150.437C41.7284 142.759 47.946 136.528 55.6379 136.528H97.367C105.059 136.528 111.276 142.759 111.276 150.437C111.276 158.116 105.059 164.347 97.367 164.347Z\"\n\t\t\t\tfill=\"#2F2F2F\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M66.8594 71.8152C96.0928 43.5248 162.002 38.3966 204.247 56.3842L199.605 57.9365C191.63 60.5994 187.324 69.2129 189.987 77.1874C192.102 83.5639 198.037 87.5964 204.414 87.5964C206.011 87.5964 207.624 87.3375 209.222 86.8053L243.706 75.3156C243.873 75.2549 243.995 75.118 244.162 75.0566C245.06 74.7221 245.821 74.1286 246.658 73.6107C247.586 73.0479 248.545 72.5606 249.306 71.8302C249.443 71.7082 249.611 71.6625 249.748 71.5413C250.265 71.0084 250.478 70.3393 250.904 69.7458C251.558 68.8634 252.228 68.0416 252.685 67.0372C253.095 66.1242 253.247 65.1654 253.461 64.2067C253.674 63.263 253.948 62.3806 253.978 61.4218C254.024 60.2955 253.78 59.2304 253.582 58.1198C253.445 57.435 253.551 56.7502 253.323 56.0654L238.105 10.4116C235.442 2.43714 226.92 -1.88428 218.854 0.7936C210.896 3.44152 206.589 12.0701 209.236 20.0445L211.413 26.5274C158.03 5.86117 83.2947 13.561 45.691 49.947C39.6647 55.7757 39.4971 65.4237 45.3407 71.465C51.2001 77.492 60.8181 77.6746 66.8594 71.8152Z\"\n\t\t\t\tfill=\"#2F2F2F\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M228.187 285.612C198.954 313.903 133.045 319.031 90.8 301.043L106.627 295.763C114.586 293.115 118.893 284.486 116.245 276.512C113.582 268.553 105.029 264.216 96.994 266.894L51.3402 282.111C51.1576 282.172 51.0513 282.309 50.8837 282.37C49.9249 282.721 49.1181 283.344 48.2357 283.892C47.3683 284.44 46.4702 284.896 45.7398 285.596C45.6028 285.718 45.4352 285.748 45.2982 285.885C44.781 286.418 44.5677 287.087 44.1419 287.68C43.4877 288.563 42.8179 289.385 42.3614 290.389C41.9505 291.302 41.7985 292.261 41.5853 293.219C41.372 294.148 41.098 295.031 41.0681 296.004C41.0224 297.131 41.2657 298.196 41.464 299.306C41.601 299.991 41.4947 300.676 41.7229 301.361L56.9406 347.015C59.0714 353.391 64.9907 357.424 71.3672 357.424C72.9651 357.424 74.578 357.18 76.1915 356.633C84.1503 353.985 88.4574 345.356 85.8095 337.382L83.6331 330.899C102.99 338.386 125.056 342.267 147.244 342.267C186.263 342.267 225.372 330.671 249.356 307.478C255.383 301.65 255.55 292.002 249.707 285.961C243.861 279.936 234.244 279.769 228.187 285.612Z\"\n\t\t\t\tfill=\"#2F2F2F\"\n\t\t\t/>\n\t\t\t<path\n\t\t\t\td=\"M284.295 128.113H185.356C179.277 128.113 174.363 133.038 174.363 139.106V238.045C174.363 244.113 179.277 249.037 185.356 249.037H284.295C290.374 249.037 295.287 244.113 295.287 238.045V139.106C295.287 133.038 290.374 128.113 284.295 128.113ZM240.322 216.058H218.335C212.256 216.058 207.342 211.133 207.342 205.065C207.342 198.997 212.256 194.072 218.335 194.072H240.322C246.401 194.072 251.315 198.997 251.315 205.065C251.315 211.133 246.401 216.058 240.322 216.058ZM251.315 183.079H218.336C212.257 183.079 207.343 178.154 207.343 172.086C207.343 166.017 212.257 161.093 218.336 161.093H251.315C257.394 161.093 262.308 166.017 262.308 172.086C262.308 178.154 257.394 183.079 251.315 183.079Z\"\n\t\t\t\tfill=\"#4E4E4E\"\n\t\t\t/>\n\t\t</svg>\n\t);\n}\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/* global cbLocalized */\nimport apiFetch from '@wordpress/api-fetch';\n\nconst { useState } = wp.element;\n\nfunction stateManager() {\n\tconst [cbState, setcbState] = useState(cbLocalized);\n\n\t// Enable Dev mode on .local domains automatically.\n\tconst [isDevMode, setIsDevMode] = useState(window.location.href.indexOf('.local') !== -1);\n\n\tconst [isSaving, setIsSaving] = useState(false);\n\n\tconst toggleDevMode = () => {\n\t\tsetIsDevMode(!isDevMode);\n\t};\n\n\tconst get = (optionKey, additionalKey) => {\n\t\tif (optionKey && additionalKey) {\n\t\t\treturn cbState?.[optionKey]?.[additionalKey] ? cbState[optionKey][additionalKey] : false;\n\t\t}\n\n\t\tif (optionKey) {\n\t\t\treturn cbState?.[optionKey] ? cbState[optionKey] : false;\n\t\t}\n\n\t\treturn cbState;\n\t};\n\n\t/**\n\t * Helper function to deep merge two objects.\n\t * @param {object} target\n\t * @param {object} source\n\t */\n\tfunction deepObjectMerge(target, source) {\n\t\tconst result = { ...target, ...source };\n\t\tconst keys = Object.keys(result);\n\n\t\tkeys.forEach((key) => {\n\t\t\tconst targetProp = target[key];\n\t\t\tconst sourceProp = source[key];\n\t\t\t// if two objects are in conflict\n\t\t\tif (typeof targetProp === 'object' && typeof sourceProp === 'object') {\n\t\t\t\tresult[key] = deepObjectMerge(targetProp, sourceProp);\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Pass our state to the REST API which will handle the rest.\n\t *\n\t * @param {*} modifed\n\t */\n\tconst update = async (modifed, deepMerge = true) => {\n\t\tsetIsSaving(true);\n\t\tconst updatedState = deepMerge ? deepObjectMerge({ ...cbState }, modifed) : { ...cbState, ...modifed };\n\n\t\tsetcbState(updatedState);\n\n\t\tawait apiFetch({ path: 'conditional-blocks/v1/update', method: 'POST', data: { ...updatedState } }).then((res) => {\n\t\t\tif (isDevMode) {\n\t\t\t\tconsole.log(res);\n\t\t\t}\n\t\t});\n\n\t\tsetIsSaving(false);\n\t};\n\n\t/**\n\t * Pass our state to the REST API which will handle the rest.\n\t *\n\t * @param {*} modifed\n\t */\n\tconst convertLegacyConditions = async (legacyConditions) => {\n\t\tconst converted = await apiFetch({ path: 'conditional-blocks/v1/convert-legacy-conditions', method: 'POST', data: { legacyConditions } }).then((res) => {\n\t\t\treturn res;\n\t\t});\n\n\t\treturn converted;\n\t};\n\n\tfunction uuid4() {\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n\t\t\t// eslint-disable-next-line no-bitwise\n\t\t\tconst r = (Math.random() * 16) | 0;\n\t\t\t// eslint-disable-next-line eqeqeq,no-bitwise\n\t\t\tconst v = c == 'x' ? r : (r & 0x3) | 0x8;\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n\n\treturn { cbState, get, update, convertLegacyConditions, uuid4, isDevMode, toggleDevMode, isSaving };\n}\n\nexport default stateManager;\n","const { Button, ButtonGroup, Popover } = wp.components;\n\nconst { __ } = wp.i18n;\nconst { useState } = wp.element;\n\nfunction ButtonWithConfirm({\n\tclassName,\n\tonConfirm = null,\n\tbuttonText = __('Remove', 'conditional-blocks'),\n\tPopoverText = __('Are you sure? This cannot be undone.', 'conditional-blocks'),\n\tconfirmText = __('Yes, delete', 'conditional-blocks'),\n\tcancelText = __('Cancel', 'conditional-blocks')\n}) {\n\tconst [isVisible, setIsVisible] = useState(false);\n\n\tconst handleConfirm = () => {\n\t\tif (typeof onConfirm === 'function') {\n\t\t\tonConfirm();\n\t\t}\n\t\t// setIsVisible(false);\n\t};\n\n\treturn (\n\t\t<Button\n\t\t\tclassName=\"conditional-blocks-builder-modal__delete_button\"\n\t\t\ticon=\"remove\"\n\t\t\tisSmall\n\t\t\tisSecondary\n\t\t\tisDestructive\n\t\t\tonClick={() => {\n\t\t\t\tsetIsVisible(!isVisible);\n\t\t\t}}\n\t\t>\n\t\t\t{buttonText}\n\t\t\t{isVisible && (\n\t\t\t\t<Popover\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tsetIsVisible(false);\n\t\t\t\t\t}}\n\t\t\t\t\tonFocusOutside={() => {\n\t\t\t\t\t\tsetIsVisible(false);\n\t\t\t\t\t}}\n\t\t\t\t\tnoArrow={false}\n\t\t\t\t\tclassName=\"conditional-blocks-builder-modal__popover\"\n\t\t\t\t>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">{PopoverText}</div>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t<ButtonGroup className=\"conditional-blocks-builder-modal__button_group\">\n\t\t\t\t\t\t\t<Button isSecondary isDestructive onClick={handleConfirm}>\n\t\t\t\t\t\t\t\t{confirmText}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tsetIsVisible(false);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{cancelText}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t</div>\n\t\t\t\t</Popover>\n\t\t\t)}\n\t\t</Button>\n\t);\n}\n\nexport default ButtonWithConfirm;\n","(function() { module.exports = window[\"wp\"][\"apiFetch\"]; }());","/* global cbLocalized */\nimport stateManager from '../../stateManager';\n\nimport ButtonWithConfirm from '../ButtonWithConfirm';\n\nconst { __ } = wp.i18n;\nconst { Fragment } = wp.element;\nconst { useInstanceId } = wp.compose;\nconst { TextControl, TimePicker, SelectControl, Button, CheckboxControl, TextareaControl, RadioControl, ExternalLink } = wp.components;\n\nexport default function ConditionBuilder({ className, conditions = [], onChange = null, isPreset = false }) {\n\tconst manager = stateManager();\n\n\tconst instanceId = useInstanceId(ConditionBuilder);\n\n\t// Deep clone the conditons, otherwise duplicate blocks will sync.\n\t// Keep in mind.JSON is fast but not all data types are support.\n\t// eslint-disable-next-line no-param-reassign\n\tconditions = JSON.parse(JSON.stringify(conditions));\n\n\tconst blankCondition = (inheritId = false) => {\n\t\treturn {\n\t\t\tid: inheritId || manager.uuid4(),\n\t\t\ttype: false\n\t\t};\n\t};\n\n\t// Omit the change.\n\tconst handleChange = (modifedCondtions) => {\n\t\tif (typeof onChange === 'function') {\n\t\t\tonChange(modifedCondtions);\n\t\t}\n\t};\n\n\tconst presetValues = () => {\n\t\tconst presetOptions = [];\n\n\t\tconst getPresets = manager.get('presets');\n\n\t\tconst allPresets = Array.isArray(getPresets) ? getPresets : [];\n\n\t\tallPresets.forEach((preset) => presetOptions.push({ value: preset.id, label: preset.name }));\n\n\t\treturn presetOptions;\n\t};\n\n\tconst condtionTypes = () => {\n\t\tconst proLabel = !cbLocalized?.isPro ? ` - ${__('Pro', 'conditional-blocks')}` : '';\n\n\t\tconst types = [\n\t\t\t{ value: null, label: __('Select a condition', 'conditional-blocks') },\n\t\t\t{ value: 'responsiveScreenSizes', label: __('Responsive (Screens sizes)', 'conditional-blocks'), disabled: isPreset },\n\t\t\t{ value: 'userLoggedIn', label: __('User Logged In', 'conditional-blocks') },\n\t\t\t{ value: 'userLoggedOut', label: __('User Logged Out', 'conditional-blocks') },\n\t\t\t{ value: 'dateRange', label: __('Date Range', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro },\n\t\t\t{ value: 'postMeta', label: __('Post Meta Data', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro },\n\t\t\t{ value: 'userRoles', label: __('User Roles', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro },\n\t\t\t{ value: 'queryStrings', label: __('Query Strings', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro },\n\t\t\t{ value: 'domainReferrers', label: __('Domain Referrers', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro },\n\t\t\t{ value: 'postIds', label: __('Post IDs', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro },\n\t\t\t{ value: 'userAgents', label: __('User Agents (Devices)', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro },\n\t\t\t{ value: 'phpLogic', label: __('PHP Logic', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro }\n\t\t];\n\n\t\t// If this isn't used for presets then we allow presets to be selected.\n\t\tif (!isPreset) {\n\t\t\ttypes.push({ value: 'presets', label: __('Presets (from Preset Manager)', 'conditional-blocks') + proLabel, disabled: !cbLocalized?.isPro });\n\t\t}\n\n\t\treturn types;\n\t};\n\n\tconst conditionKeys = Object.keys(conditions);\n\n\treturn (\n\t\t<div className={className}>\n\t\t\t<div className=\"conditional-blocks-builder-modal__condition_builder_wrapper\">\n\t\t\t\t{!conditionKeys.length && (\n\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__single_condition-wrapper conditional-blocks-builder-modal__no_conditions\">\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__single_condition\">\n\t\t\t\t\t\t\t\t<p>{__('Add your first condition to get started.', 'conditional-blocks')}</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Fragment>\n\t\t\t\t)}\n\n\t\t\t\t{conditionKeys.map((value, index) => {\n\t\t\t\t\tconst condition = conditions[index];\n\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\" key={condition.id + instanceId}>\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__single_condition-wrapper\">\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__single_condition\">\n\t\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\t\tlabel={__('Condition Type:', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\tvalue={condition.type}\n\t\t\t\t\t\t\t\t\t\tonChange={(newType) => {\n\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t// Reset the whole condition to ensure theres no left over data.\n\t\t\t\t\t\t\t\t\t\t\tmodified[index] = blankCondition(modified[index]?.id ? modified[index].id : false);\n\t\t\t\t\t\t\t\t\t\t\tmodified[index].type = newType;\n\n\t\t\t\t\t\t\t\t\t\t\t// Set necessary defaults for some types.\n\t\t\t\t\t\t\t\t\t\t\tif (newType === 'dateRange') {\n\t\t\t\t\t\t\t\t\t\t\t\t// Make sure start and end times are set for date ranges.\n\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].startTime = Math.floor(Date.now() / 1000);\n\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].endTime = Math.floor(Date.now() / 1000);\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\toptions={condtionTypes()}\n\t\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'userLoggedIn' && <p>{__('The selected block will only be visible to users who are logged into the site.', 'conditional-blocks')}</p>}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'userLoggedOut' && <p>{__(\"The selected block will only be visible to users who aren't logged into the site.\", 'conditional-blocks')}</p>}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'presets' && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{__('Select a Preset. Presets are conditons that can be shared by multiple blocks. You can edit presets from the Preset Manager.', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"conditional-blocks-builder-modal__role_select\"\n\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.presets}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newPresets) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].presets = newPresets;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\toptions={presetValues()}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'userRoles' && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{__('Block is only visible signed in users who have the selected roles.', 'conditional-blocks')}</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"conditional-blocks-builder-modal__role_select\"\n\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.allowedRoles}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newRoles) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].allowedRoles = newRoles;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\toptions={manager.get('roles') || []}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'userAgents' && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t<p>{__('The block is only visible to users who are viewing blocks from the selected devices.', 'conditional-blocks')}</p>\n\t\t\t\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"conditional-blocks-builder-modal__role_select\"\n\t\t\t\t\t\t\t\t\t\t\t\tmultiple\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.allowedAgents}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].allowedAgents = newValue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'iPhone', value: 'iphone' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t// { label: 'iPad', value: 'ipad' }, ipad is now macOS\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'Android Device', value: 'android' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'MacOS', value: 'macintosh' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'Windows', value: 'windows' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'Linux', value: 'linux' }\n\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<p>{__('Hold the CONTORL key to select multiple.', 'conditonal-blocks')}</p>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'postMeta' && (\n\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Post Meta Key', 'conditonal-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"_favourite_site\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thelp={__('Use custom meta key.', 'conditonal-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.metaKey ? condition.metaKey : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(nextValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].metaKey = nextValue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<SelectControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"conditional-blocks-builder-modal__role_select\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Select operator', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.metaOperator ? condition.metaOperator : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].metaOperator = newValue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'Choose Operator', value: '' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'TRUE', value: 'true' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'FALSE', value: 'false' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'Equals String', value: '===' },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ label: 'Does Not Equal', value: '!==' }\n\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{(condition.metaOperator === '===' || condition.metaOperator === '!==') && (\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Post Meta Value', 'conditonal-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"conditionalblocks.com\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thelp={__('The expected value of your post meta data.', 'conditonal-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.metaValue ? condition.metaValue : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(nextValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].metaValue = nextValue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'postIds' && (\n\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{__('Each post/page in WordPress has a unique ID. You can use the ID to make sure the block on display on that post.', 'conditional-blocks')}</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<RadioControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Show the block on post/page:', 'conditonal-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tselected={condition?.equal ? condition.equal : 'equal'}\n\t\t\t\t\t\t\t\t\t\t\t\t\toptions={[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ value: 'equal', label: __('IDs equal below IDs', 'conditonal-blocks') },\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{ value: 'notEqual', label: __('IDs not equal to below IDs', 'conditonal-blocks') }\n\t\t\t\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(option) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].equal = option;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Post IDs (One per line)', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"92017&#10;32020\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.postIds ? condition.postIds : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(nextValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].postIds = nextValue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'phpLogic' && (\n\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{__('Read more about this condition in the', 'conditional-blocks')}{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLink href=\"https://conditionalblocks.com/docs/conditions/show-block-by-php-logic\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{__('PHP Logic documentation.', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t</ExternalLink>\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('PHP Logic', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"has_post_thumbnail()\"\n\t\t\t\t\t\t\t\t\t\t\t\t\thelp={__(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Add valid PHP conditional tags. The functions must return TRUE for the selected block to be visible. This is a developer feature, use at your own risk.',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.phpLogic ? condition.phpLogic : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(nextValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].phpLogic = nextValue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'responsiveScreenSizes' && (\n\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"The selected block will automatically hide on screens sizes that aren't selected. You can edit screen widths from the settings tab.\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`${instanceId}_mobile`}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Show on Mobile screens', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={!!condition?.showOn?.includes('showMobileScreen')}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(checked) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!Array.isArray(modified[index].showOn)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn = [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn.push('showMobileScreen');\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst findIndex = modified[index].showOn.indexOf('showMobileScreen');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn.splice(findIndex, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`${instanceId}_tablet`}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Show on Tablet screens', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={!!condition?.showOn?.includes('showTabletScreen')}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(checked) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!Array.isArray(modified[index].showOn)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn = [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn.push('showTabletScreen');\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst findIndex = modified[index].showOn.indexOf('showTabletScreen');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn.splice(findIndex, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`${instanceId}_desktop`}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Show on Desktop screens', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\tchecked={!!condition?.showOn?.includes('showDesktopScreen')}\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(checked) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (!Array.isArray(modified[index].showOn)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn = [];\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (checked) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn.push('showDesktopScreen');\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst findIndex = modified[index].showOn.indexOf('showDesktopScreen');\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (index > -1) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].showOn.splice(findIndex, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'dateRange' && (\n\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Date conditions use the timezone from your WordPress time settings. The selected block will only be visible after the start date. You can optionally select an end date.',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<h4>{__('Start Date', 'conditional-blocks')}</h4>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\t\t\t\t\t\t\tis12Hour\n\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentTime={condition.startTime * 1000}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newTime) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].startTime = Math.floor(new Date(newTime).getTime() / 1000);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tlabel={__('Choose end date?', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked={!!condition?.hasEndDate}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(checked) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].hasEndDate = checked;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t{condition?.hasEndDate && (\n\t\t\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<h4>{__('End Date', 'conditional-blocks')}</h4>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<TimePicker\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tis12Hour\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentTime={condition.endTime * 1000}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(newTime) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].endTime = Math.floor(new Date(newTime).getTime() / 1000);\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'domainReferrers' && (\n\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\t\t\t\t\t'Show the selected block to visitors who have been directed to your page from an another domain. Domain referrers requires third party server to pass the referring information.',\n\t\t\t\t\t\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"The Query String Condition could be better solution if you don't know that the third-party server is reliable with domain referring.\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t<h4>{__('Domain referrers (comma seperate for multiple)', 'conditional-blocks')}</h4>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"conditionalblocks.com, puri.io, google.com\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.domainReferrers ? condition.domainReferrers : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(nextValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].domainReferrers = nextValue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t{condition.type === 'queryStrings' && (\n\t\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t\t<h4>{__('Query Strings', 'conditional-blocks')}</h4>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t{__('Display the selected block for URL queries that contain any of the below strings.', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<p>{__('One Query String pattern per line.', 'conditional-blocks')}</p>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<h4> {__('Example Usage', 'conditional-blocks')}</h4>\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{__('We want to display the selected block for only people who visit the following link on our site', 'conditional-blocks')}{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<ExternalLink href=\"https://conditionalblocks.com/?testing=query-string\">https://conditionalblocks.com/?testing=query-string&impressed=true</ExternalLink>{' '}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{__('We can use', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<code>testing=query-string</code> {__('as an allowed pattern.', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t\t\t\t\t<h4> {__('Allowed Query String Patterns', 'conditional-blocks')}</h4>\n\t\t\t\t\t\t\t\t\t\t\t\t<TextareaControl\n\t\t\t\t\t\t\t\t\t\t\t\t\thelp={__('One pattern per line. The block will display if any pattern matches.', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"testing=query-string&#10;success=true\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={condition?.allowedStrings ? condition.allowedStrings : ''}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(nextValue) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Update the condition.\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified[index].allowedStrings = nextValue;\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t)}\n\n\t\t\t\t\t\t\t\t\t<ButtonWithConfirm\n\t\t\t\t\t\t\t\t\t\tonConfirm={() => {\n\t\t\t\t\t\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\t\t\t\t\t\t// Remove this condition.\n\t\t\t\t\t\t\t\t\t\t\tmodified.splice(index, 1);\n\n\t\t\t\t\t\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</div>\n\n\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t<Button\n\t\t\t\t\ticon=\"insert\"\n\t\t\t\t\tisSecondary\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tconst modified = Array.from(conditions);\n\t\t\t\t\t\tmodified.push(blankCondition());\n\t\t\t\t\t\thandleChange(modified);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{__('Add condition', 'conditional-blocks')}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _extends() {\n  module.exports = _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nmodule.exports = _extends;","/* global cbLocalized */\n/**\n * WordPress Dependencies\n */\nimport stateManager from './stateManager';\nimport ConditionBuilder from './components/ConditionBuilder';\nimport { isLegacyConditions, conditionalBlocksLogo } from './helpers';\n\nimport ButtonWithConfirm from './components/ButtonWithConfirm';\n\nconst { __ } = wp.i18n;\nconst { addFilter } = wp.hooks;\nconst { Fragment, useState } = wp.element;\nconst { InspectorControls } = wp.blockEditor;\nconst { createHigherOrderComponent } = wp.compose;\nconst { TextControl, PanelBody, PanelRow, Button, Modal, CheckboxControl, TabPanel, ExternalLink, Spinner, Icon } = wp.components;\n\n/**\n * Add default Attributes to all blocks.\n *\n * @param {Object} settings Settings for the block.\n *\n * @return {Object} settings Modified settings.\n */\n\nfunction addAttributes(settings) {\n\tif (typeof settings.attributes !== 'undefined') {\n\t\tconst conditionsObject = {\n\t\t\tconditionalBlocks: {\n\t\t\t\ttype: 'object',\n\t\t\t\tdefault: {\n\t\t\t\t\tconditions: [] // array - active conditions.\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tsettings.attributes = Object.assign(settings.attributes, conditionsObject);\n\t}\n\n\treturn settings;\n}\n\naddFilter('blocks.registerBlockType', 'conditionalBlocks/attributes', addAttributes, 1);\n\n// Save all condtions back to the block attributes.\nconst getConditions = () => {\n\tconst block = wp.data.select('core/block-editor').getSelectedBlock();\n\n\treturn block?.attributes?.conditionalBlocks?.conditions ? block.attributes.conditionalBlocks.conditions : [];\n};\n\n// Save all condtions back to the block attributes.\nconst saveConditions = (newCondtions) => {\n\tconst block = wp.data.select('core/block-editor').getSelectedBlock();\n\n\tif (block.clientId) {\n\t\twp.data.dispatch('core/block-editor').updateBlockAttributes(block.clientId, { conditionalBlocks: { conditions: [...newCondtions] } }, false);\n\t}\n};\n\n/**\n * Add mobile visibility controls on Advanced Block Panel.\n *\n * @param {Function} BlockEdit Block edit component.\n *\n * @return {Function} BlockEdit Modified block edit component.\n */\nconst withAdvancedControls = createHigherOrderComponent((BlockEdit) => {\n\treturn (props) => {\n\t\tconst { name, attributes, isSelected, setAttributes } = props;\n\n\t\t// Create a copy that we can edit.\n\t\tconst conditionalBlocks = attributes?.conditionalBlocks ? { ...attributes.conditionalBlocks } : [];\n\t\t// Create a copy that we can edit.\n\t\tconst conditionalBlocksAttributes = attributes?.conditionalBlocksAttributes ? { ...attributes.conditionalBlocksAttributes } : false;\n\n\t\t// Setup our current conditions.\n\t\tconst currentConditions = Array.isArray(conditionalBlocks?.conditions) ? Array.from(conditionalBlocks.conditions) : [];\n\n\t\tconst [isOpen, setOpen] = useState(false);\n\n\t\tconst [createPresetName, setCreatePresetName] = useState([]);\n\n\t\tconst manager = stateManager();\n\n\t\t// Prevent unnecessary loading.\n\t\tif (!isOpen && !isSelected) {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<BlockEdit {...props} />\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t}\n\n\t\tconst blockHasConditions = currentConditions.length >= 1;\n\n\t\tconst requiresConversion = !!(!blockHasConditions && isLegacyConditions(conditionalBlocksAttributes));\n\n\t\tconst presets = cbLocalized?.isPro && manager.get('presets') ? manager.get('presets') : [];\n\n\t\tconst openModal = () => setOpen(true);\n\t\tconst closeModal = () => setOpen(false);\n\n\t\tconst savePresets = (newPresets) => {\n\t\t\tif (cbLocalized?.isPro) {\n\t\t\t\tcbLocalized.presets = newPresets;\n\t\t\t\tmanager.update({ presets: newPresets }, false);\n\t\t\t}\n\t\t};\n\n\t\tconst convertConditions = async () => {\n\t\t\tif (requiresConversion) {\n\t\t\t\tconst converted = await manager.convertLegacyConditions(conditionalBlocksAttributes);\n\n\t\t\t\tif (converted) {\n\t\t\t\t\tsaveConditions(converted);\n\t\t\t\t\t// Delete the old attributes.\n\t\t\t\t\tsetAttributes({ conditionalBlocksAttributes: false });\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst blankPreset = (prefilledName) => {\n\t\t\treturn {\n\t\t\t\tid: manager.uuid4(),\n\t\t\t\ttype: 'preset',\n\t\t\t\tname: prefilledName,\n\t\t\t\tconditions: []\n\t\t\t};\n\t\t};\n\n\t\tconst currentBlockTab = () => {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<h2>Condition Builder</h2>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t'The selected block will display when the following conditions are met. For examples of all conditions types, how-to guides and more information',\n\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t)}{' '}\n\t\t\t\t\t\t\t<ExternalLink href=\"https://conditionalblocks.com/docs?cb=builder-link\">{__('Read Documentation', 'conditional-blocks')}</ExternalLink>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<ConditionBuilder\n\t\t\t\t\t\tconditions={currentConditions}\n\t\t\t\t\t\tonChange={(updatedCondtions) => {\n\t\t\t\t\t\t\tsaveConditions(updatedCondtions);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{!cbLocalized?.isPro && (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__pro_notice\">\n\t\t\t\t\t\t\t\t\t<h4>{__('Unlock Powerful Conditons Types', 'conditional-blocks')}</h4>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\t\t\t'Unlock ALL conditions types and create presets for multiple blocks on your whole site, while supporting development of Conditional Block Pro',\n\t\t\t\t\t\t\t\t\t\t\t'conditonal-blocks'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t.\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<ExternalLink href=\"https://conditionalblocks.com/pricing?cb=upgrade-from-free/\">{__('Upgrade to Conditional Blocks Pro', 'conditonal-blocks')}</ExternalLink>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{manager.isDevMode && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder__spacer\" />\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__developer_section\">\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t\t\t\t<h3>Developer Mode 👩‍💻</h3>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<strong>{__(\"All blocks and conditions in Developer Mode are created normally. It's safe to use.\", 'conditional-blocks')}</strong>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t\t\t\t<h4>{__('Conditions', 'conditional-blocks')}</h4>\n\t\t\t\t\t\t\t\t\t<pre>{JSON.stringify(currentConditions, null, 2)}</pre>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t};\n\n\t\tconst presetsManager = () => {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<h2>{__('Preset Manager', 'conditional-blocks')}</h2>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t'Presets are groups of conditions that can be applied across multiple blocks. Presets allow you to apply frequently used groups of conditions to blocks in one place, rather than having to edit each individual block on the site.',\n\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t'Create and edit your presets here. Presets can then be applied to the selected block using the Condition Builder under the Current Block tab.',\n\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t{cbLocalized?.isPro && (\n\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t{manager.isSaving ? (\n\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t<Spinner style={{ display: 'inline-block' }} />\n\t\t\t\t\t\t\t\t\t\t<strong>{__('Saving changes..', 'conditional-blocks')}</strong>\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t\t<Icon className=\"conditional-blocks__save-icon\" icon=\"cloud\" />\n\t\t\t\t\t\t\t\t\t\t<strong>{__('Changes to presets save instantly to all blocks with that preset enabled.', 'conditional-blocks')}</strong>\n\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{!cbLocalized?.isPro ? (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__pro_notice\">\n\t\t\t\t\t\t\t\t\t<h4>{__('Unlock Preset Conditons')}</h4>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t{__(\n\t\t\t\t\t\t\t\t\t\t\t'Preset conditons are available in Conditional Blocks Pro. Set multiple conditions inside a preset, then apply the preset to each block. Editing a preset will apply to all blocks with the preset.',\n\t\t\t\t\t\t\t\t\t\t\t'conditional-blocks'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t<ExternalLink href=\"https://conditionalblocks.com/pricing?cb=upgrade-from-free\">{__('Upgrade to Conditional Blocks Pro', 'conditional-blocks')}</ExternalLink>\n\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t{Object.keys(presets).map((value, index) => {\n\t\t\t\t\t\t\t\t\tconst preset = presets[index];\n\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<PanelBody className=\"conditional-blocks-builder-modal__single_preset\" title={preset.name} key={preset.id} initialOpen={false}>\n\t\t\t\t\t\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t\t\t\t\t\t<ConditionBuilder\n\t\t\t\t\t\t\t\t\t\t\t\t\tisPreset\n\t\t\t\t\t\t\t\t\t\t\t\t\tconditions={Array.isArray(preset?.conditions) ? [...preset.conditions] : []}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(updatedCondtions) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modifedPresets = [...presets];\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodifedPresets[index].conditions = [...updatedCondtions];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsavePresets(modifedPresets);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t<ButtonWithConfirm\n\t\t\t\t\t\t\t\t\t\t\t\t\tbuttonText={__('Remove Preset', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t\t\t\t\tonConfirm={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst modified = [...presets];\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t// Remove this condition.\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmodified.splice(index, 1);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsavePresets(modified);\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder__spacer\" />\n\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t<h3>{__('Create Preset')}</h3>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row\">\n\t\t\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\t\t\tlabel={__('Preset Name', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\thelp={__('Give the preset a recognizable name.', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\tvalue={createPresetName}\n\t\t\t\t\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\t\t\t\t\tsetCreatePresetName(newValue);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tplaceholder={__('My Preset..', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\tisSecondary\n\t\t\t\t\t\t\t\t\tdisabled={!createPresetName.length}\n\t\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\t\tconst modifiedPresets = [...presets];\n\t\t\t\t\t\t\t\t\t\tmodifiedPresets.push(blankPreset(createPresetName));\n\t\t\t\t\t\t\t\t\t\tsavePresets(modifiedPresets);\n\t\t\t\t\t\t\t\t\t\t// stateManager().update({ presets: modifiedPresets });\n\t\t\t\t\t\t\t\t\t\tsetCreatePresetName('');\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{__('Create Preset', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t)}\n\t\t\t\t\t{manager.isDevMode && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder__spacer\" />\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__developer_section\">\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t\t\t\t<h3>Developer Mode 👩‍💻</h3>\n\t\t\t\t\t\t\t\t\t<strong>{__(\"All blocks and conditions in Developer Mode are created normally. It's safe to use.\", 'conditional-blocks')}</strong>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t\t\t\t<h4>Presets</h4>\n\t\t\t\t\t\t\t\t\t<pre>{JSON.stringify(presets, null, 2)}</pre>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t);\n\t\t};\n\n\t\tconst additionalSettings = () => {\n\t\t\treturn (\n\t\t\t\t<Fragment>\n\t\t\t\t\t<h2>{__('Settings')}</h2>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t{__('Settings for Conditional Blocks. Looking for more?', 'conditional-blocks')}{' '}\n\t\t\t\t\t\t\t<ExternalLink href=\"https://conditionalblocks.com/docs?cb=builder-link\">{__('Read documentation.', 'conditional-blocks')}</ExternalLink>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t<h3>{__('Responsive Blocks', 'conditional-blocks')}</h3>\n\t\t\t\t\t\t<p>{__(\"Change the breakpoints of blocks with the Responsive Condition Type to match your theme's breakpoints if needed.\", 'conditional-blocks')}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={__('Desktop Minimum (px)', 'conditional-blocks')}\n\t\t\t\t\t\t\tvalue={manager.get('screensizes', 'device_size_desktop_min')}\n\t\t\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\t\t\tmanager.update({ screensizes: { device_size_desktop_min: newValue } });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t\tplaceholder=\"1025\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={__('Tablet Maximum (px)', 'conditional-blocks')}\n\t\t\t\t\t\t\tvalue={manager.get('screensizes', 'device_size_tablet_max')}\n\t\t\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\t\t\tmanager.update({ screensizes: { device_size_tablet_max: newValue } });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"1024\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={__('Tablet Minimum (px)', 'conditional-blocks')}\n\t\t\t\t\t\t\tvalue={manager.get('screensizes', 'device_size_tablet_min')}\n\t\t\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\t\t\tmanager.update({ screensizes: { device_size_tablet_min: newValue } });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"768\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t<TextControl\n\t\t\t\t\t\t\tlabel={__('Mobile Maximum (px)', 'conditional-blocks')}\n\t\t\t\t\t\t\tvalue={manager.get('screensizes', 'device_size_mobile_max')}\n\t\t\t\t\t\t\tonChange={(newValue) => {\n\t\t\t\t\t\t\t\tmanager.update({ screensizes: { device_size_mobile_max: newValue } });\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tplaceholder=\"767\"\n\t\t\t\t\t\t\ttype=\"number\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t<h3>Developer Mode</h3>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tActivate Developer Mode manually or by using a <code>.local</code> domain. Developer Mode provides extra information to help development and debugging.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p>All blocks and conditions in Developer Mode are created normally. It's safe to use.</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t<CheckboxControl\n\t\t\t\t\t\t\tlabel=\"Developer Mode\"\n\t\t\t\t\t\t\tchecked={manager.isDevMode}\n\t\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\t\tmanager.toggleDevMode();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{manager.isDevMode && (\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder__spacer\" />\n\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__developer_section\">\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t\t\t\t<h3>Developer Mode 👩‍💻</h3>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__row \">\n\t\t\t\t\t\t\t\t\t<h4>Settings State</h4>\n\t\t\t\t\t\t\t\t\t<pre>{JSON.stringify(manager.cbState, null, 2)}</pre>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t)}\n\t\t\t\t</Fragment>\n\t\t\t);\n\t\t};\n\n\t\treturn (\n\t\t\t<Fragment>\n\t\t\t\t<BlockEdit {...props} />\n\t\t\t\t{isOpen && (\n\t\t\t\t\t<Modal\n\t\t\t\t\t\ticon={<Icon icon={conditionalBlocksLogo(20)} />}\n\t\t\t\t\t\ttitle={cbLocalized.isPro ? 'Conditional Blocks Pro' : 'Conditional Blocks'}\n\t\t\t\t\t\tonRequestClose={closeModal}\n\t\t\t\t\t\tclassName=\"conditional-blocks-builder-modal\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"conditional-blocks-builder-modal__wrapper\">\n\t\t\t\t\t\t\t<TabPanel\n\t\t\t\t\t\t\t\tclassName=\"conditional-blocks-builder-modal__tabs\"\n\t\t\t\t\t\t\t\tactiveClass=\"conditional-blocks-active-tab\"\n\t\t\t\t\t\t\t\ttabs={[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: 'tab1',\n\t\t\t\t\t\t\t\t\t\ttitle: `${__('Current Block', 'conditional-blocks')} - (${name})`,\n\t\t\t\t\t\t\t\t\t\tclassName: 'tab-one',\n\t\t\t\t\t\t\t\t\t\tcontent: currentBlockTab()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: 'tab2',\n\t\t\t\t\t\t\t\t\t\ttitle: __('Preset Manager', 'conditional-blocks'),\n\t\t\t\t\t\t\t\t\t\tclassName: 'tab-two',\n\t\t\t\t\t\t\t\t\t\tcontent: presetsManager()\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: 'tab3',\n\t\t\t\t\t\t\t\t\t\ttitle: __('Settings', 'conditional-blocks'),\n\t\t\t\t\t\t\t\t\t\tclassName: 'tab-two',\n\t\t\t\t\t\t\t\t\t\tcontent: additionalSettings()\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{(tab) => <div>{tab.content}</div>}\n\t\t\t\t\t\t\t</TabPanel>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Modal>\n\t\t\t\t)}\n\t\t\t\t{isSelected && (\n\t\t\t\t\t<InspectorControls>\n\t\t\t\t\t\t<PanelBody title=\"Conditions\" icon={conditionalBlocksLogo} initialOpen={blockHasConditions || requiresConversion}>\n\t\t\t\t\t\t\t<PanelRow>{__('Configure the selected block to display when conditions are met.')}</PanelRow>\n\n\t\t\t\t\t\t\t{blockHasConditions && (\n\t\t\t\t\t\t\t\t<Fragment>\n\t\t\t\t\t\t\t\t\t<h4>{__('Active Block Conditions')}</h4>\n\t\t\t\t\t\t\t\t\t{Object.keys(currentConditions).map((value, index) => {\n\t\t\t\t\t\t\t\t\t\tconst condition = currentConditions[index];\n\n\t\t\t\t\t\t\t\t\t\tif (!condition.type.length) {\n\t\t\t\t\t\t\t\t\t\t\treturn <Fragment key={condition.id} />;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Fragment key={condition.id}>\n\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"conditional-blocks-builder__active_condition_tag\">{condition.type}</div>\n\t\t\t\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t</Fragment>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t<PanelRow>\n\t\t\t\t\t\t\t\t{(requiresConversion && (\n\t\t\t\t\t\t\t\t\t<Button isSecondary onClick={convertConditions}>\n\t\t\t\t\t\t\t\t\t\t{__('Convert to 2.0 conditions', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)) || (\n\t\t\t\t\t\t\t\t\t<Button isSecondary onClick={openModal}>\n\t\t\t\t\t\t\t\t\t\t{__('Configure Conditions', 'conditional-blocks')}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</PanelRow>\n\t\t\t\t\t\t</PanelBody>\n\t\t\t\t\t</InspectorControls>\n\t\t\t\t)}\n\t\t\t</Fragment>\n\t\t);\n\t};\n}, 'withAdvancedControls');\n\naddFilter('editor.BlockEdit', 'conditionalBlocks/conditionBuilder', withAdvancedControls, 10);\n\n/**\n * Legacy Attributes.\n *\n * @param {Object} settings Settings for the block.\n *\n * @return {Object} settings Modified settings.\n */\n\nfunction legacyAttributes(settings) {\n\t// check if object exists for old Gutenberg version compatibility\n\n\tif (typeof settings.attributes !== 'undefined') {\n\t\tconst conditionsObject = {\n\t\t\tconditionalBlocksAttributes: {\n\t\t\t\ttype: 'object',\n\t\t\t\tdefault: {\n\t\t\t\t\thideOnMobile: false, // Boolean.\n\t\t\t\t\thideOnTablet: false, // Boolean.\n\t\t\t\t\thideOnDesktop: false, // Boolean.\n\t\t\t\t\tuserState: '',\n\t\t\t\t\tuserRoles: [], // array.\n\t\t\t\t\thttpReferer: '', // String.\n\t\t\t\t\thttpUserAgent: [], // array.\n\t\t\t\t\tpostMeta: {\n\t\t\t\t\t\tkey: '',\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t\toperator: 'true'\n\t\t\t\t\t},\n\t\t\t\t\tdates: [] // Array.\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tsettings.attributes = Object.assign(settings.attributes, conditionsObject);\n\t}\n\n\treturn settings;\n}\n\naddFilter('blocks.registerBlockType', 'conditionalBlocks/custom/attributes', legacyAttributes, 1);\n\n/**\n * Add a class to blocks that have condtions.\n */\nconst withCustomClassName = createHigherOrderComponent((BlockListBlock) => {\n\treturn (props) => {\n\t\tconst { attributes } = props;\n\n\t\tconst { conditionalBlocks, conditionalBlocksAttributes } = attributes;\n\t\t// Setup our current conditions.\n\t\tconst currentConditions = Array.isArray(conditionalBlocks?.conditions) ? conditionalBlocks.conditions : [];\n\n\t\tconst blockHasConditions = currentConditions.length >= 1;\n\n\t\tconst isLegacy = isLegacyConditions(conditionalBlocksAttributes);\n\n\t\tif (blockHasConditions || isLegacy) {\n\t\t\treturn <BlockListBlock {...props} className=\"conditional-blocks-has-conditions\" />;\n\t\t}\n\t\treturn <BlockListBlock {...props} />;\n\t};\n}, 'withClientIdClassName');\n\naddFilter('editor.BlockListBlock', 'conditionalBlocks/editor/blockClasses', withCustomClassName);\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;"],"sourceRoot":""}