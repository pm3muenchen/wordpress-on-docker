{"version":3,"sources":["whb-editor.js"],"names":["window","onload","document","body","style","display","$","ready","on","$currentElement","$currentModalEdit","currentCell","currentRow","currentPanel","$clipboardElem","$body","$desktopSortablePlaces","$wrap","$sortablePlaces","find","components","whb_localize","Array","isArray","editorComponents","editor_components","frontendComponents","frontend_components","platforms","desktop-view","tablets-view","mobiles-view","importButtonFlag","whbDebug","console","log","JSON","parse","whbIsJson","str","whbIsObject","e","whbIsFrontendBuilder","hasClass","key","element","hasOwnProperty","search","elemUniqueID","slice","each","wp","media","$logo","children","logo","hide","after","this","attributes","url","docHeight","whbElementSettings","new_el","arguments","length","undefined","attr","elemID","elemName","$fieldInput","$this","fieldStd","prepend","ajax","ajaxurl","data","action","el_name","nonce","success","hidden_element","append","name","uniqueId","addClass","show","$imgContainer","$tabPanels","whbFields","currentElemHtml","whbModalDraggable","fieldName","val","whbFieldDependency","$elem","elemEditorIcon","haveDependency","parentValue","push","platform_key","elem_value","editor_icon","$imgIdInput","is","$modalWrap","$inputNumber","removeAttr","frame","$option","$delImgLink","$addImgLink","event","unit","$numberUnit","multiple","value","state","get","first","toJSON","html","attachment","css","$iconsWrap","id","preventDefault","siblings","num_val","removeClass","$customSelect","closest","$icon","$iconClass","wpColorPicker","forcePlaceholderSize","tolerance","numberValue","parseFloat","beforeStop","$els_place","elemFromCell","start_cell_obj","el","whbCreateFrontendComponents","whbSaveAllData","destroyed","disableSelection","fetch","always","remove","pos4","getElementsByClassName","clientY","$parent","els","i","$el","elems","trigger","outerHTML","replaceWith","pos1","pos2","pos3","clientX","$editor","$actions","whbCloseModalDraggable","whbElementDrag","top","offsetTop","whbInjectScriptToIframe","myScript","iframeHead","appendChild","onmousemove","onmousedown","whb_drag_mouse_down","src","frames","getElementsByTagName","createElement","$WHBFrontend","component_key","Object","assign","background-color","box-shadow","cell","type","stringify","border-color","$newWHBFrontend","styles","extend","innerHTML","contents","path","assets_url","scripts","screen_key","rowKey","content","cell_key","whb_data_frontend_components","alert","String","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","confirm","fileName","dataType","err","$panels","obj","$settings","desktopRow1Settings","height","header_type","overflow","text","axis","$tabs","$currentTab","$tabUl","end","fadeIn","$modal","modalTarget","uniqueID","Date","toString","valueOf","editorIcon","parent","newElem","clone","controlsHtml","data-hidden_element","data-editor_icon","splice","panel","row","mustBeHidden","$save_btn","$row","fieldValue","$currentElements","textValue","indexOf","replace","imageID","trim","sortable","connectWith","start","ui","item","map","new_cell_objs","location","iframeTagStyle","res","reload","whbInjectStyleToIframe","$headerSwitcher","files","onReaderLoad","reader","readAsText","file","prebuilds_url","whbImport","row1","settings","niceSelect","change","language","href","jQuery"],"mappings":"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","file":"whb-editor.js","sourcesContent":["\"use strict\";\r\n\r\n// window.onbeforeunload = function () {\r\n// \treturn \"There are unsaved changes. Leave now?\";\r\n// };\r\n\r\nwindow.onload = function () {\r\n\tdocument.body.style.display = \"block\";\r\n};\r\n\r\n(function ($) {\r\n\t$(document).ready(function () {\r\n\t\t$(window).on('load', function () {\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Global Variables\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// DOM variables\r\n\t\t\tvar $body = $('body');\r\n\t\t\tvar $wrap = $('#wn-header-builder');\r\n\t\t\tvar $sortablePlaces = $wrap.find('.whb-elements-place');\r\n\t\t\tvar $desktopSortablePlaces = $wrap.find('.whb-desktop-panel').find('.whb-columns[data-columns=\"row1\"]').find('.whb-elements-place');\r\n\t\t\tvar $currentElement;\r\n\t\t\tvar $currentModalEdit;\r\n\r\n\t\t\t// Data variables\r\n\t\t\tvar components = whb_localize.components && !Array.isArray(whb_localize.components) ? whb_localize.components : {};\r\n\t\t\tvar editorComponents = whb_localize.editor_components ? whb_localize.editor_components : {};\r\n\t\t\tvar frontendComponents = whb_localize.frontend_components ? whb_localize.frontend_components : {};\r\n\t\t\tconst platforms = {\r\n\t\t\t\t\"desktop-view\": {},\r\n\t\t\t\t\"tablets-view\": {},\r\n\t\t\t\t\"mobiles-view\": {},\r\n\t\t\t};\r\n\r\n\t\t\t// Position variables\r\n\t\t\tvar currentCell;\r\n\t\t\tvar currentRow;\r\n\t\t\tvar currentPanel;\r\n\r\n\t\t\t// Import button flag\r\n\t\t\tvar importButtonFlag = false;\r\n\r\n\t\t\t// Clipboard element\r\n\t\t\tvar $clipboardElem;\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Helper Functions\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbDebug() {\r\n\t\t\t\tconsole.log('%c Components:', 'font-size: 18px; background: #EC9787; color: #fff;', components);\r\n\t\t\t\tconsole.log('%c Editor Components:', 'font-size: 18px; background: #6F9FD8; color: #fff;', editorComponents);\r\n\t\t\t\tconsole.log('%c Frontend Components:', 'font-size: 18px; background: #ECDB54; color: #fff;', frontendComponents);\r\n\t\t\t}\r\n\t\t\twhbDebug();\r\n\r\n\t\t\t// check string is json\r\n\t\t\tfunction whbIsJson(str) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tJSON.parse(str);\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbIsObject(obj) {\r\n\t\t\t\treturn obj === Object(obj);\r\n\t\t\t}\r\n\r\n\t\t\t// Check for emptiness object\r\n\t\t\tfunction whbIsEmptyObj(obj) {\r\n\t\t\t\tfor (var key in obj) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbIsFrontendBuilder() {\r\n\t\t\t\tif ($body.hasClass('whb-frontend-builder-wrap')) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Editor Preview\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfor (var key in components) {\r\n\t\t\t\tif (components.hasOwnProperty(key)) {\r\n\t\t\t\t\tconst element = components[key];\r\n\t\t\t\t\tif (key.search('logo') != -1) {\r\n\t\t\t\t\t\tvar elemUniqueID = key.slice('5');\r\n\t\t\t\t\t\t$wrap.find('.whb-elements-item[data-element=\"logo\"][data-unique-id=\"' + elemUniqueID + '\"]').each(function () {\r\n\t\t\t\t\t\t\tvar $logo = $(this);\r\n\t\t\t\t\t\t\twp.media.attachment(element.logo).fetch().done(function () {\r\n\t\t\t\t\t\t\t\t$logo.children('a').hide().after('<img class=\"whb-img-placeholder-el\" src=\"' + this.attributes.url + '\" alt=\"\">');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Frontend Builder Iframe Height\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tvar docHeight = $(document).height();\r\n\t\t\t$('#whbIframe').css('height', docHeight);\r\n\t\t\t$('#whbIframe').contents().find('a').on('click', function () {\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Nice Scroll\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// $('.whb-frontend-builder').niceScroll({\r\n\t\t\t// \tcursorborder: \"0\",\r\n\t\t\t// \tbackground: \"#e7e7e7\",\r\n\t\t\t// \tcursorcolor: \"#91989e\",\r\n\t\t\t// });\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Tab\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.find('.whb-tab-panel' + $wrap.find('.whb-tabs-list').find('li.w-active').find('a').attr('href')).show();\r\n\t\t\t$wrap.on('click', '.whb-tabs-list a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $currentTab = $this.parent();\r\n\t\t\t\tvar $tabs = $this.closest('ul').find('li');\r\n\t\t\t\tvar $tabUl = $this.closest('ul');\r\n\r\n\t\t\t\tif (!$currentTab.hasClass('w-active')) {\r\n\t\t\t\t\t// active current navigation\r\n\t\t\t\t\t$tabs.removeClass('w-active');\r\n\t\t\t\t\t$currentTab.addClass('w-active');\r\n\r\n\t\t\t\t\t// show panel\r\n\t\t\t\t\tif ($tabUl.hasClass('whb-element-groups')) {\r\n\t\t\t\t\t\t$wrap.find('.whb-group-panel').hide().end().find('.whb-group-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else if ($tabUl.hasClass('whb-styling-groups')) {\r\n\t\t\t\t\t\t$tabUl.siblings('.whb-styling-group-panel').hide().end().siblings('.whb-styling-group-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else if ($tabUl.hasClass('whb-styling-screens')) {\r\n\t\t\t\t\t\t$wrap.find('.whb-styling-screen-panel').hide().end().find('.whb-styling-screen-panel[data-id=\"' + $this.attr('href') + '\"]').show();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$wrap.find('.whb-tab-panel:not(.whb-group-panel)').hide().end().find('.whb-tab-panel' + $this.attr('href')).fadeIn(300);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// Toggle device\r\n\t\t\t$('#whb-desktop-tab, #whb-sticky-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-tablets-device whb-mobiles-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-desktop-view, .whb-sticky-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#whb-tablets-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-mobiles-device');\r\n\t\t\t\t$body.addClass('whb-tablets-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-tablets-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t$('#whb-mobiles-tab').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t$body.removeClass('whb-tablets-device');\r\n\t\t\t\t$body.addClass('whb-mobiles-device');\r\n\t\t\t\t$('.whb-screen-view').hide();\r\n\t\t\t\t$('.whb-mobiles-view').show();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Full Modal\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// Show full modal\r\n\t\t\t$wrap.find('.whb-full-modal-btn').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar modalTarget = $this.data('modal-target');\r\n\t\t\t\tvar $modal = $wrap.find('.whb-full-modal[data-modal=\"' + modalTarget + '\"]');\r\n\r\n\t\t\t\t$body.css('overflow', 'hidden');\r\n\t\t\t\t$modal.find('textarea').val(' ');\r\n\t\t\t\t$modal.fadeIn(200);\r\n\t\t\t});\r\n\t\t\t// Hide full modal\r\n\t\t\t$wrap.find('.whb-full-modal-close').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$body.css('overflow', 'initial');\r\n\t\t\t\t$wrap.find('.whb-full-modal').hide();\r\n\t\t\t});\r\n\r\n\t\t\t$wrap.find('.whb-full-modal').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$body.css('overflow', 'initial');\r\n\t\t\t\t$wrap.find('.whb-full-modal').hide();\r\n\t\t\t});\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Add Element Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// Show add element modal\r\n\t\t\t$wrap.on('click', '.w-add-element', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$wrap.find('.whb-elements').show();\r\n\t\t\t\tcurrentPanel = $this.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\tcurrentRow = $this.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\tcurrentCell = $this.attr('data-align-col'); // left, center, right\r\n\t\t\t});\r\n\t\t\t// Hide add element modal\r\n\t\t\t$wrap.on('click', '.whb-modal-header i, .whb_close', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t});\r\n\t\t\t// Append new element to editor\r\n\t\t\t$wrap.find('.whb-modal-wrap').on('click', '.whb-elements-item a', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar uniqueID = new Date().valueOf();\r\n\t\t\t\tvar editorIcon = $(this).find('i').attr('class');\r\n\t\t\t\tvar controlsHtml = `<span class=\"whb-controls\">\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Copy to Clipboard\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-copy-btn ti-files\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Settings\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-edit-btn sl-pencil\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Hide\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-hide-btn ti-eye\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t\t<span class=\"whb-tooltip tooltip-on-top\" data-tooltip=\"Remove\">\r\n\t\t\t\t\t\t\t\t\t\t\t<i class=\"whb-control whb-delete-btn ti-close\"></i>\r\n\t\t\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t\t\t\t</span>`;\r\n\r\n\t\t\t\tif ($this.closest('.whb-elements-item').hasClass('whb-clipboard-item')) {\r\n\t\t\t\t\tvar $elem = $this.parent();\r\n\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\t\tvar newElem = elemName + '_' + uniqueID;\r\n\r\n\t\t\t\t\tfor (const key in components) {\r\n\t\t\t\t\t\tif (components.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\tconst element = $.extend(true, {}, components[key]);\r\n\t\t\t\t\t\t\tif (elemID == key) {\r\n\t\t\t\t\t\t\t\tcomponents[newElem] = element;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t$currentElement = $clipboardElem.clone().removeClass('w-col-sm-4').attr({\r\n\t\t\t\t\t\t'data-unique-id': uniqueID\r\n\t\t\t\t\t}).prepend(controlsHtml);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$currentElement = $this.parent().clone().removeClass('w-col-sm-4').attr({\r\n\t\t\t\t\t\t'data-unique-id': uniqueID,\r\n\t\t\t\t\t\t'data-hidden_element': false,\r\n\t\t\t\t\t\t'data-editor_icon': editorIcon\r\n\t\t\t\t\t}).prepend(controlsHtml);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$wrap.find('.whb-columns[data-columns=\"' + currentRow + '\"]').find('.whb-col.col-' + currentCell).find('.whb-elements-place').append($currentElement);\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\twhbElementSettings($currentElement, currentPanel, true);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Copy Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-copy-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $elem = $(this).closest('.whb-elements-item').clone();\r\n\r\n\t\t\t\t$clipboardElem = $elem.clone();\r\n\r\n\t\t\t\t// Remove all clipboard item\r\n\t\t\t\t$('.whb-clipboard-item').remove();\r\n\r\n\t\t\t\t// Create new clipboard item\r\n\t\t\t\t$elem.removeClass('ui-sortable-handle').addClass('w-col-sm-4 whb-clipboard-item');\r\n\t\t\t\t$elem.children('.whb-controls').remove().end().children('img').remove();\r\n\t\t\t\t$elem.children('a').css({\r\n\t\t\t\t\t'display': 'block',\r\n\t\t\t\t\t'background-color': '#e3e3e3'\r\n\t\t\t\t});\r\n\t\t\t\t$elem.find('i').removeClass('ti-control-record').addClass('ti-clipboard').css('color', '#f60');\r\n\t\t\t\t$elem.find('.whb-element-name').text('Paste (Clipboard)');\r\n\r\n\t\t\t\t// Append clipboard item to elements box\r\n\t\t\t\t$('.whb-modal-wrap.whb-elements').find('.whb-modal-contents').prepend($elem);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Delete Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-delete-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tif (confirm('Press OK to delete element, Cancel to leave')) {\r\n\t\t\t\t\tvar $elem = $(this).closest('.whb-elements-item');\r\n\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\r\n\t\t\t\t\t// delete from components\r\n\t\t\t\t\tdelete components[elemID];\r\n\r\n\t\t\t\t\t// delete from editor components\r\n\t\t\t\t\tif (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\tvar cell = editorComponents[currentPanel][currentRow][currentCell];\r\n\r\n\t\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\t\tif (cell[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\tcell.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tfor (var platform_key in platforms) {\r\n\t\t\t\t\t\t\tvar findInCell = false;\r\n\t\t\t\t\t\t\tvar panel = editorComponents[platform_key];\r\n\r\n\t\t\t\t\t\t\t(function () {\r\n\t\t\t\t\t\t\t\tfor (var rowKey in panel) {\r\n\t\t\t\t\t\t\t\t\tvar row = panel[rowKey];\r\n\r\n\t\t\t\t\t\t\t\t\tfor (var cell_key in row) {\r\n\t\t\t\t\t\t\t\t\t\tvar cell = row[cell_key];\r\n\r\n\t\t\t\t\t\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (cell[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcell.splice(i, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t\treturn; // return to anonymous function\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t\t$wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]').remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Edit Button\r\n\t\t\t * \r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb-edit-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t\t$currentElement = $this.closest('.whb-elements-item');\r\n\t\t\t\tcurrentPanel = $this.closest('.whb-tab-panel').attr('id');\r\n\t\t\t\twhbElementSettings($currentElement, currentPanel);\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Hidden Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t// row\r\n\t\t\t$wrap\r\n\t\t\t\t.find('.whb-tabs-panels').find('.whb-columns')\r\n\t\t\t\t.children('.whb-elements-item[data-hidden_element=\"true\"]')\r\n\t\t\t\t.find('i.whb-hide-btn').removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash')\r\n\t\t\t\t.closest('.whb-columns').addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\r\n\t\t\t// elements\r\n\t\t\t$wrap\r\n\t\t\t\t.find('.whb-elements-place').find('.whb-elements-item[data-hidden_element=\"true\"]')\r\n\t\t\t\t.find('i.whb-hide-btn').removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\r\n\t\t\t$wrap.on('click', '.whb-hide-btn', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t// Get variables\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $elem = $this.closest('.whb-elements-item');\r\n\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\tvar hidden_element;\r\n\t\t\t\tvar mustBeHidden;\r\n\r\n\t\t\t\t// Position of the Current Element\r\n\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\r\n\t\t\t\tif (elemName == 'header-area' || elemName == 'sticky-area') {\r\n\t\t\t\t\t// Toggle hidden_element value : ( true | false )\r\n\t\t\t\t\tvar hidden_element = editorComponents[currentPanel][currentRow]['settings']['hidden_element'];\r\n\t\t\t\t\teditorComponents[currentPanel][currentRow]['settings']['hidden_element'] = !hidden_element;\r\n\t\t\t\t\tmustBeHidden = !hidden_element;\r\n\t\t\t\t\t$elem.attr('data-hidden_element', !hidden_element).data('hidden_element', !hidden_element);\r\n\r\n\t\t\t\t\t// Change row opacity and eye icon\r\n\t\t\t\t\tvar $row = $elem.closest('.whb-columns');\r\n\t\t\t\t\tif (mustBeHidden) {\r\n\t\t\t\t\t\t$this.removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\t\t\t\t\t\t$row.addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.removeClass('wn-far wn-fa-eye-slash').addClass('ti-eye');\r\n\t\t\t\t\t\t$row.removeClass('whb-columns-hidden').css('opacity', '1');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Toggle hidden_element value : ( true | false )\r\n\t\t\t\t\tconst cell = editorComponents[currentPanel][currentRow][currentCell];\r\n\t\t\t\t\tfor (var i = 0; i < cell.length; i++) {\r\n\t\t\t\t\t\tvar element = cell[i];\r\n\t\t\t\t\t\tif (element.uniqueId == elemUniqueID) {\r\n\r\n\t\t\t\t\t\t\telement.hidden_element = !element.hidden_element;\r\n\t\t\t\t\t\t\tmustBeHidden = element.hidden_element;\r\n\t\t\t\t\t\t\t$elem.attr('data-hidden_element', element.hidden_element).data('hidden_element', element.hidden_element);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Change row opacity and eye icon\r\n\t\t\t\t\tif (mustBeHidden) {\r\n\t\t\t\t\t\t$this.removeClass('ti-eye').addClass('wn-far wn-fa-eye-slash');\r\n\t\t\t\t\t\t$elem.find('a').css('color', '#888');\r\n\t\t\t\t\t\t$elem.addClass('whb-columns-hidden').css('opacity', '0.45');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.removeClass('wn-far wn-fa-eye-slash').addClass('ti-eye');\r\n\t\t\t\t\t\t$elem.find('a').css('color', '#0073aa');\r\n\t\t\t\t\t\t$elem.removeClass('whb-columns-hidden').css('opacity', '1');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Save Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t * @event\tClick\r\n\t\t\t */\r\n\t\t\t$wrap.on('click', '.whb_save', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\tvar $save_btn = $(this);\r\n\t\t\t\tvar elemName = $currentElement.data('element');\r\n\t\t\t\tvar elemUniqueID = $currentElement.data('unique-id');\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\t// Set field value\r\n\t\t\t\t$currentModalEdit.find('.whb-field').each(function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $fieldInput = $this.find('.whb-field-input');\r\n\t\t\t\t\tvar fieldName = $fieldInput.data('field-name');\r\n\t\t\t\t\tvar fieldValue = $fieldInput.val();\r\n\r\n\t\t\t\t\tif (fieldValue == '') {\r\n\t\t\t\t\t\tif (components[elemID].hasOwnProperty(fieldName)) {\r\n\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (fieldValue != undefined) {\r\n\t\t\t\t\t\t\tif (typeof fieldValue == 'string' && fieldValue.indexOf('\"') != -1) {\r\n\t\t\t\t\t\t\t\tfieldValue = fieldValue.replace(/\"/g, \"'\");\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldValue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t// Copy element in all platforms\r\n\t\t\t\tvar currentElemHtml = $currentElement[0].outerHTML;\r\n\t\t\t\tvar $currentElements = $wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]');\r\n\t\t\t\t$currentElements.each(function () {\r\n\t\t\t\t\t$(this).replaceWith(currentElemHtml);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Create preview for text and image field in editor\r\n\t\t\t\t$currentElements = $wrap.find('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]');\r\n\t\t\t\t$currentModalEdit.find('.whb-field.whb-placeholder').each(function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tif ($this.hasClass('whb-img-placeholder')) {\r\n\t\t\t\t\t\tvar imageID = $this.find('.whb-field-input').val();\r\n\r\n\t\t\t\t\t\tif (imageID) {\r\n\t\t\t\t\t\t\twp.media.attachment(imageID).fetch().done(function () {\r\n\t\t\t\t\t\t\t\tif (!$currentElements.children('.whb-img-placeholder-el').length > 0) {\r\n\t\t\t\t\t\t\t\t\t$currentElements.attr('data-img-placeholder', imageID).children('a').hide().after('<img class=\"whb-img-placeholder-el\" src=\"' + this.attributes.url + '\" alt=\"\" />');\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t$currentElements.children('.whb-img-placeholder-el').attr('src', this.attributes.url);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currentElements.removeAttr('data-img-placeholder').children('a').show().end().children('.whb-img-placeholder-el').remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif ($this.hasClass('whb-text-placeholder')) {\r\n\t\t\t\t\t\tvar textValue = $this.find('.whb-field-input').val();\r\n\r\n\t\t\t\t\t\tif (textValue.trim()) {\r\n\t\t\t\t\t\t\tif (!$currentElements.find('a').find('.whb-text-placeholder-el').length > 0) {\r\n\t\t\t\t\t\t\t\t$currentElements.find('a').find('.whb-element-name').hide().after('<span class=\"whb-text-placeholder-el\">' + textValue + '</span>');\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$currentElements.find('a').find('.whb-text-placeholder-el').html(textValue);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$currentElements.find('a').find('span.whb-element-name').show().end().end().find('.whb-text-placeholder-el').remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Hide modal\r\n\t\t\t\tif (!whbIsFrontendBuilder()) {\r\n\t\t\t\t\t$wrap.find('.whb-modal-wrap').hide();\r\n\t\t\t\t\t$wrap.find('.whb-modal-wrap[data-element-target]').remove();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Element Settings Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbElementSettings($currentElement, currentPanel, new_el = false) {\r\n\t\t\t\tvar elemName = $currentElement.attr('data-element');\r\n\t\t\t\tvar elemUniqueID = $currentElement.attr('data-unique-id');\r\n\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\r\n\t\t\t\tif (!components.hasOwnProperty(elemID)) {\r\n\t\t\t\t\tcomponents[elemID] = {};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Preloader\r\n\t\t\t\tif (!$wrap.children('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t$wrap.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_get_component_fields',\r\n\t\t\t\t\t\tel_name: elemName,\r\n\t\t\t\t\t\tnonce: whb_localize.nonce\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tif ($wrap.children('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t$wrap.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t$('.wn-header-builder-wrap').append(data);\r\n\r\n\t\t\t\t\t\t$currentModalEdit = $wrap.find('.whb-modal-wrap[data-element-target=\"' + elemName + '\"]');\r\n\r\n\t\t\t\t\t\t// Init tab\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tabs-list').find('li').removeClass('w-active');\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tab-panel').hide();\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-tabs-list').find('li:first').addClass('w-active');\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').children('.whb-tab-panel:first').show();\r\n\t\t\t\t\t\t// Styling tab\r\n\t\t\t\t\t\tvar $tabPanels = $currentModalEdit.find('.whb-modal-contents').children('.whb-tab-panel');\r\n\t\t\t\t\t\tif (currentPanel == 'desktop-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#all\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'tablets-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#tablets\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'mobiles-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#mobiles\"]').show();\r\n\t\t\t\t\t\t} else if (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel[data-id=\"#all\"]').show();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Show first panel\r\n\t\t\t\t\t\t$tabPanels.find('.whb-tab-panel').find('.whb-tab-panel:first').show();\r\n\r\n\t\t\t\t\t\t// Show current modal edit\r\n\t\t\t\t\t\t$currentModalEdit.show();\r\n\r\n\t\t\t\t\t\t// Set fields values\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-field').each(function () {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\tvar $fieldInput = $this.find('.whb-field-input');\r\n\t\t\t\t\t\t\tvar fieldName = $fieldInput.data('field-name');\r\n\t\t\t\t\t\t\tvar fieldStd = $fieldInput.data('field-std');\r\n\r\n\t\t\t\t\t\t\tfieldStd = (typeof fieldStd != 'undefined') ? fieldStd : '';\r\n\r\n\t\t\t\t\t\t\t// if statement: update field value\r\n\t\t\t\t\t\t\t// else statement: set default data to field\r\n\t\t\t\t\t\t\tif (typeof components[elemID][fieldName] != 'undefined') {\r\n\t\t\t\t\t\t\t\t$fieldInput.attr('value', components[elemID][fieldName]);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t$fieldInput.val(fieldStd).attr('value', fieldStd);\r\n\t\t\t\t\t\t\t\tif (fieldStd) {\r\n\t\t\t\t\t\t\t\t\tcomponents[elemID][fieldName] = fieldStd;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tif (new_el) {\r\n\t\t\t\t\t\t\tvar elemEditorIcon = $currentElement.find('a').find('i').attr('class');\r\n\t\t\t\t\t\t\tif (currentPanel == 'sticky-view') {\r\n\t\t\t\t\t\t\t\teditorComponents[currentPanel][currentRow][currentCell].push({\r\n\t\t\t\t\t\t\t\t\tname: elemName,\r\n\t\t\t\t\t\t\t\t\tuniqueId: elemUniqueID,\r\n\t\t\t\t\t\t\t\t\thidden_element: false,\r\n\t\t\t\t\t\t\t\t\teditor_icon: elemEditorIcon\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tfor (var platform_key in platforms) {\r\n\t\t\t\t\t\t\t\t\teditorComponents[platform_key][currentRow][currentCell].push({\r\n\t\t\t\t\t\t\t\t\t\tname: elemName,\r\n\t\t\t\t\t\t\t\t\t\tuniqueId: elemUniqueID,\r\n\t\t\t\t\t\t\t\t\t\thidden_element: false,\r\n\t\t\t\t\t\t\t\t\t\teditor_icon: elemEditorIcon\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Fields\r\n\t\t\t\t\t\twhbFields();\r\n\r\n\t\t\t\t\t\t// Dependency\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-dependency').on('change', function () {\r\n\t\t\t\t\t\t\twhbFieldDependency($(this));\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$currentModalEdit.find('.whb-dependency').trigger('change');\r\n\r\n\t\t\t\t\t\t// Craete|Update element in all platforms (desktop, tablets, mobiles)\r\n\t\t\t\t\t\tif (new_el) {\r\n\t\t\t\t\t\t\tvar currentElemHtml = $currentElement[0].outerHTML;\r\n\t\t\t\t\t\t\t$('.whb-elements-item[data-element=\"' + elemName + '\"][data-unique-id=\"' + elemUniqueID + '\"]').each(function () {\r\n\t\t\t\t\t\t\t\t$(this).replaceWith(currentElemHtml);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\twhbModalDraggable($currentModalEdit[0]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\twhbDebug();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Field Dependency Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbFieldDependency($parent) {\r\n\t\t\t\tvar dependencyData = $parent.data('dependency');\r\n\t\t\t\tvar parentValue = $parent.find('.whb-field-input').val();\r\n\r\n\t\t\t\t$.each(dependencyData, function (val, els) {\r\n\t\t\t\t\tfor (var i = 0; i < els.length; i++) {\r\n\r\n\t\t\t\t\t\tvar $elem = $currentModalEdit.find('.whb-field-input[data-field-name=\"' + els[i] + '\"]').closest('.whb-field').hide();\r\n\t\t\t\t\t\tvar haveDependency = $elem.attr('class') == 'whb-field w-col-sm-12 whb-dependency' ? true : false;\r\n\r\n\t\t\t\t\t\tif (val == parentValue) {\r\n\t\t\t\t\t\t\t$elem.show();\r\n\t\t\t\t\t\t\tif (haveDependency) {\r\n\t\t\t\t\t\t\t\twhbFieldDependency($el);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (haveDependency) {\r\n\t\t\t\t\t\t\t\t$.each($elem.data('dependency'), function (elem_value, elems) {\r\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < elems.length; i++) {\r\n\t\t\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-field-input[data-field-name=\"' + elems[i] + '\"]').closest('.whb-field').hide();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} // end for\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Fields Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbFields() {\r\n\t\t\t\tvar $modalWrap = $('.whb-modal-wrap');\r\n\r\n\t\t\t\t// Switcher field\r\n\t\t\t\t$modalWrap.find('.whb-switcher').find('.whb-field-input').on('change', function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\r\n\t\t\t\t\tif ($this.is(':checked')) {\r\n\t\t\t\t\t\t$this.attr('value', 'true');\r\n\t\t\t\t\t\t$this.attr('checked', 'checked');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$this.attr('value', 'false');\r\n\t\t\t\t\t\t$this.removeAttr('checked');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Attach Image field\r\n\t\t\t\t$modalWrap.find('.whb-attach-image').each(function () {\r\n\t\t\t\t\tvar frame;\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $addImgLink = $this.find('.whb-add-image');\r\n\t\t\t\t\tvar $delImgLink = $this.find('.whb-remove-image');\r\n\t\t\t\t\tvar $imgContainer = $this.find('.whb-preview-image');\r\n\r\n\t\t\t\t\t// ADD IMAGE LINK\r\n\t\t\t\t\t$addImgLink.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $imgIdInput = $this.find('input.whb-attach-image');\r\n\t\t\t\t\t\tvar value = $imgIdInput.val();\r\n\r\n\t\t\t\t\t\tvalue = value ? value : '';\r\n\r\n\t\t\t\t\t\t// If the media frame already exists, reopen it.\r\n\t\t\t\t\t\tif (frame) {\r\n\t\t\t\t\t\t\tframe.open();\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Create a new media frame\r\n\t\t\t\t\t\tframe = wp.media({\r\n\t\t\t\t\t\t\tmultiple: false // Set to true to allow multiple files to be selected\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// When an image is selected in the media frame...\r\n\t\t\t\t\t\tframe.on('select', function () {\r\n\t\t\t\t\t\t\t// Get media attachment details from the frame state\r\n\t\t\t\t\t\t\tvar attachment = frame.state().get('selection').first().toJSON();\r\n\r\n\t\t\t\t\t\t\t// Send the attachment URL to our custom image input field.\r\n\t\t\t\t\t\t\t$imgContainer.html('').append('<img src=\"' + attachment.url + '\" alt=\"\">').css('display', 'block');\r\n\r\n\t\t\t\t\t\t\t// Send the attachment id to our hidden input\r\n\t\t\t\t\t\t\t$imgIdInput.attr('value', attachment.id);\r\n\r\n\t\t\t\t\t\t\t// Unhide the remove image link\r\n\t\t\t\t\t\t\t$delImgLink.show();\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// Finally, open the modal on click\r\n\t\t\t\t\t\tframe.open();\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Delete image link\r\n\t\t\t\t\t$delImgLink.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $imgIdInput = $this.find('input.whb-attach-image');\r\n\r\n\t\t\t\t\t\t// Clear out the preview image\r\n\t\t\t\t\t\t$imgContainer.html('').hide();\r\n\r\n\t\t\t\t\t\t// Hide the delete image link\r\n\t\t\t\t\t\t$delImgLink.hide();\r\n\r\n\t\t\t\t\t\t// Delete the image id from the hidden input\r\n\t\t\t\t\t\t$imgIdInput.attr('value', '');\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Number Unit field\r\n\t\t\t\t$modalWrap.find('.whb-number-unit').each(function () {\r\n\t\t\t\t\tvar $numberUnit = $(this);\r\n\t\t\t\t\tvar $inputNumber = $numberUnit.find('input[type=\"number\"]');\r\n\t\t\t\t\tvar $option = $numberUnit.find('.whb-opts').children('span');\r\n\t\t\t\t\tvar $fieldInput = $numberUnit.find('.whb-field-input');\r\n\r\n\t\t\t\t\t$option.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar unit = $this.data('value');\r\n\t\t\t\t\t\tvar num_val = $inputNumber.val();\r\n\r\n\t\t\t\t\t\t$option.removeClass('whb-active');\r\n\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\tif (num_val) {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', num_val + unit);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t$inputNumber.on('change', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar unit = $numberUnit.find('.whb-opts').children('span.whb-active').data('value');\r\n\t\t\t\t\t\tvar num_val = $inputNumber.val();\r\n\r\n\t\t\t\t\t\tif (num_val) {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', num_val + unit);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.attr('value', '');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Custom Select field\r\n\t\t\t\t$modalWrap.find('.whb-custom-select').find('.whb-opts').find('span').on('click', function () {\r\n\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\tvar $customSelect = $this.closest('.whb-custom-select');\r\n\t\t\t\t\tvar $option = $customSelect.find('.whb-opts').children('span');\r\n\t\t\t\t\tvar $fieldInput = $customSelect.find('.whb-field-input');\r\n\t\t\t\t\tvar value = $this.data('value');\r\n\r\n\t\t\t\t\t$option.removeClass('whb-active');\r\n\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t$fieldInput.attr('value', value);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Icons field\r\n\t\t\t\t$modalWrap.find('.whb-field-icons-wrap').each(function () {\r\n\t\t\t\t\tvar $iconsWrap = $(this);\r\n\t\t\t\t\tvar $icon = $iconsWrap.find('.wn-icon').find('label');\r\n\t\t\t\t\tvar $fieldInput = $iconsWrap.find('.whb-field-input');\r\n\r\n\t\t\t\t\t$icon.on('click', function (event) {\r\n\t\t\t\t\t\tevent.preventDefault();\r\n\r\n\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\tvar $iconClass = $this.attr('for');\r\n\r\n\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t$fieldInput.attr('value', $iconClass);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// Color picker\r\n\t\t\t\t$modalWrap.find('.whb-color-picker').wpColorPicker();\r\n\r\n\r\n\t\t\t\t/**\r\n\t\t\t\t * Header Builder - Set Value of Field\r\n\t\t\t\t * @version\t1.0.0\r\n\t\t\t\t */\r\n\t\t\t\t$modalWrap.find('.whb-field').find('.whb-field-input').each(function () {\r\n\t\t\t\t\tvar $fieldInput = $(this);\r\n\r\n\t\t\t\t\t// Switcher\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-switcher-field')) {\r\n\t\t\t\t\t\tif ($fieldInput.val() == 'true') {\r\n\t\t\t\t\t\t\t$fieldInput.attr('checked', 'checked');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.removeAttr('checked');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Custom Select\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-field-custom-select')) {\r\n\t\t\t\t\t\t$fieldInput.siblings('.whb-opts').find('span').each(function () {\r\n\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t$this.removeClass('whb-active');\r\n\t\t\t\t\t\t\tif ($this.data('value') == $fieldInput.val()) {\r\n\t\t\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Number Unit\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-field-number-unit')) {\r\n\t\t\t\t\t\tvar value = $fieldInput.val();\r\n\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\tvar $numberUnit = $fieldInput.closest('.whb-number-unit');\r\n\t\t\t\t\t\t\tvar $inputNumber = $numberUnit.find('input[type=\"number\"]');\r\n\t\t\t\t\t\t\tvar $option = $numberUnit.find('.whb-opts').children('span');\r\n\t\t\t\t\t\t\tvar numberValue = parseFloat(value);\r\n\t\t\t\t\t\t\tvar valueUnit = value.split(numberValue)[1];\r\n\r\n\t\t\t\t\t\t\t$inputNumber.val(numberValue);\r\n\t\t\t\t\t\t\t$option.each(function () {\r\n\t\t\t\t\t\t\t\tvar $this = $(this);\r\n\t\t\t\t\t\t\t\tvar unit = $this.data('value');\r\n\r\n\t\t\t\t\t\t\t\t$this.removeClass('whb-active');\r\n\t\t\t\t\t\t\t\tif (unit == valueUnit) {\r\n\t\t\t\t\t\t\t\t\t$this.addClass('whb-active');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$fieldInput.closest('.whb-number-unit').find('input[type=\"number\"]').val('');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Icon\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-icon-field')) {\r\n\t\t\t\t\t\tvar value = $fieldInput.val();\r\n\t\t\t\t\t\tvar $iconsWrap = $fieldInput.closest('.whb-field-icons-wrap');\r\n\t\t\t\t\t\tvar $icon = $iconsWrap.find('.wn-icon').find('label');\r\n\r\n\t\t\t\t\t\tif (value) {\r\n\t\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t\t$iconsWrap.find('.wn-icon').find('label[for=\"' + value + '\"]').addClass('whb-active');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$icon.removeClass('whb-active');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Attach Image\r\n\t\t\t\t\tif ($fieldInput.hasClass('whb-attach-image')) {\r\n\t\t\t\t\t\tvar val = $fieldInput.val();\r\n\t\t\t\t\t\tvar $delImgLink = $fieldInput.siblings('.whb-remove-image');\r\n\t\t\t\t\t\tvar $imgContainer = $fieldInput.siblings('.whb-preview-image');\r\n\r\n\t\t\t\t\t\tif (val && !wp.media.attachment(val).destroyed) {\r\n\t\t\t\t\t\t\tif (!$currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\twp.media.attachment(val).fetch().always(function () {\r\n\t\t\t\t\t\t\t\tif ($currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').length > 0) {\r\n\t\t\t\t\t\t\t\t\t$currentModalEdit.find('.whb-modal-contents').find('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t$imgContainer.html('')\r\n\t\t\t\t\t\t\t\tif (this.attributes.url != undefined) {\r\n\t\t\t\t\t\t\t\t\t// Send the attachment URL to our custom image input field.\r\n\t\t\t\t\t\t\t\t\t$imgContainer.append('<img src=\"' + this.attributes.url + '\" alt=\"\">').css('display', 'block');\r\n\t\t\t\t\t\t\t\t\t// Unhide the remove image link\r\n\t\t\t\t\t\t\t\t\t$delImgLink.show();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// Clear out the preview image\r\n\t\t\t\t\t\t\t$imgContainer.html('').hide();\r\n\t\t\t\t\t\t\t// Hide the delete image link\r\n\t\t\t\t\t\t\t$delImgLink.hide();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Drag and Drop Functions\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// Editor draggable\r\n\t\t\tfunction whbEditorDraggable() {\r\n\t\t\t\t$sortablePlaces.sortable({\r\n\t\t\t\t\tconnectWith: '.whb-elements-place',\r\n\t\t\t\t\tplaceholder: 'ui-sortable-placeholder',\r\n\t\t\t\t\tforcePlaceholderSize: true,\r\n\t\t\t\t\ttolerance: 'pointer',\r\n\t\t\t\t\tstart: function (event, ui) {\r\n\t\t\t\t\t\tvar $elem = $(ui.item);\r\n\r\n\t\t\t\t\t\tcurrentPanel = $elem.closest('.whb-tab-panel').attr('id'); // desktop-view, tablets-view, mobiles-view, sticky-view\r\n\t\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\t\t\t\t\t},\r\n\t\t\t\t\tbeforeStop: function (event, ui) {\r\n\t\t\t\t\t\tvar $elem = $(ui.item);\r\n\t\t\t\t\t\tvar $els_place = $elem.closest('.whb-elements-place');\r\n\t\t\t\t\t\tvar elemName = $elem.data('element');\r\n\t\t\t\t\t\tvar elemUniqueID = $elem.data('unique-id').toString();\r\n\t\t\t\t\t\tvar elemID = elemName + '_' + elemUniqueID;\r\n\t\t\t\t\t\tvar elemFromCell;\r\n\r\n\t\t\t\t\t\t// Remove element from start cell\r\n\t\t\t\t\t\tvar start_cell_obj = editorComponents[currentPanel][currentRow][currentCell];\r\n\t\t\t\t\t\tfor (var i = 0; i < start_cell_obj.length; i++) {\r\n\t\t\t\t\t\t\tif (start_cell_obj[i].uniqueId == elemUniqueID) {\r\n\t\t\t\t\t\t\t\telemFromCell = start_cell_obj.splice(i, 1);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Add element to received cell\r\n\t\t\t\t\t\tcurrentRow = $elem.closest('.whb-columns').attr('data-columns'); // topbar, row1, row2, row3\r\n\t\t\t\t\t\tcurrentCell = $elem.closest('.whb-col').attr('data-align-col'); // left, center, right\r\n\t\t\t\t\t\tvar new_cell_objs = $els_place.children('.whb-elements-item').map(function (i, el) {\r\n\t\t\t\t\t\t\t$elem = $(el);\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tname: $elem.data('element'),\r\n\t\t\t\t\t\t\t\tuniqueId: $elem.data('unique-id').toString(),\r\n\t\t\t\t\t\t\t\thidden_element: JSON.parse($elem.data('hidden_element')),\r\n\t\t\t\t\t\t\t\teditor_icon: $elem.data('editor_icon'),\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}).get();\r\n\r\n\t\t\t\t\t\t// Update editor components\r\n\t\t\t\t\t\teditorComponents[currentPanel][currentRow][currentCell] = new_cell_objs;\r\n\r\n\t\t\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t\t\twhbDebug();\r\n\t\t\t\t\t}\r\n\t\t\t\t}).disableSelection();\r\n\t\t\t}\r\n\t\t\twhbEditorDraggable();\r\n\r\n\t\t\t// Modal draggable\r\n\t\t\tfunction whbModalDraggable(element) {\r\n\t\t\t\tvar pos1 = 0,\r\n\t\t\t\t\tpos2 = 0,\r\n\t\t\t\t\tpos3 = 0,\r\n\t\t\t\t\tpos4 = 0;\r\n\r\n\t\t\t\tif (element.getElementsByClassName('whb-modal-header')) {\r\n\t\t\t\t\telement.getElementsByClassName('whb-modal-header')[0].onmousedown = whb_drag_mouse_down;\r\n\t\t\t\t} else {\r\n\t\t\t\t\telement.onmousedown = whb_drag_mouse_down;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whb_drag_mouse_down(e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tpos3 = e.clientX;\r\n\t\t\t\t\tpos4 = e.clientY;\r\n\t\t\t\t\tdocument.onmouseup = whbCloseModalDraggable;\r\n\t\t\t\t\tdocument.onmousemove = whbElementDrag;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whbElementDrag(e) {\r\n\t\t\t\t\te = e || window.event;\r\n\t\t\t\t\tpos1 = pos3 - e.clientX;\r\n\t\t\t\t\tpos2 = pos4 - e.clientY;\r\n\t\t\t\t\tpos3 = e.clientX;\r\n\t\t\t\t\tpos4 = e.clientY;\r\n\t\t\t\t\telement.style.top = (element.offsetTop - pos2) + \"px\";\r\n\t\t\t\t\telement.style.left = (element.offsetLeft - pos1) + \"px\";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfunction whbCloseModalDraggable() {\r\n\t\t\t\t\tdocument.onmouseup = null;\r\n\t\t\t\t\tdocument.onmousemove = null;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twhbModalDraggable($('.whb-modal-wrap')[0]);\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Publish Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$('.redux-action_bar input[name=\"redux_save\"], #whb-publish').on('click', function (e) {\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t// Editor Preloader\r\n\t\t\t\tif ($wrap.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$wrap.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Frontend Preloader\r\n\t\t\t\tvar $WHBFrontend = $('#whbIframe').contents().find('#webnus-header-builder');\r\n\t\t\t\t// var $WHBFrontend = $('#webnus-header-builder');\r\n\t\t\t\tif ($WHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$WHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_publish',\r\n\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\tcomponents: JSON.stringify(components),\r\n\t\t\t\t\t\teditorComponents: JSON.stringify(editorComponents),\r\n\t\t\t\t\t\tfrontendComponents: JSON.stringify(frontendComponents),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (res) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t// Remove prelaoder\r\n\t\t\t\t\t\t$wrap.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t$WHBFrontend.children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\tif (importButtonFlag) {\r\n\t\t\t\t\t\t\tlocation.reload();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Collapse Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$('.whb-action-collapse').on('click', function () {\r\n\t\t\t\tvar $elem = $(this);\r\n\t\t\t\tvar $editor = $('.wn-header-builder-wrap.whb-frontend-builder').css('bottom', '-60%');\r\n\t\t\t\tvar $actions = $('.whb-actions').css('bottom', '0');\r\n\r\n\t\t\t\t// if: close\r\n\t\t\t\t// else: open\r\n\t\t\t\tif ($elem.hasClass('whb-open')) {\r\n\t\t\t\t\t$editor.css('bottom', '-60%');\r\n\t\t\t\t\t$actions.css('bottom', '0');\r\n\t\t\t\t\t$elem.removeClass('whb-open')\r\n\t\t\t\t\t$elem.children('i').attr('class', 'ti-arrow-circle-up');\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$editor.css('bottom', '0');\r\n\t\t\t\t\t$actions.css('bottom', '60%');\r\n\t\t\t\t\t$elem.addClass('whb-open')\r\n\t\t\t\t\t$elem.children('i').attr('class', 'ti-arrow-circle-down');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Get Script\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbInjectScriptToIframe(src) {\r\n\t\t\t\tvar iframeHead = window.frames[\"whbIframe\"].document.getElementsByTagName(\"head\")[0];\r\n\t\t\t\tvar myScript = document.createElement('script');\r\n\t\t\t\tmyScript.src = src;\r\n\t\t\t\tiframeHead.appendChild(myScript);\r\n\t\t\t}\r\n\r\n\t\t\tfunction whbInjectStyleToIframe(styles) {\r\n\t\t\t\tvar iframeTagStyle = window.frames[\"whbIframe\"].document;\r\n\t\t\t\tiframeTagStyle.getElementById('whb-enqueue-dynamic-style').children[0].innerHTML = styles;\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Save All Data Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbSaveAllData() {\r\n\t\t\t\tvar $WHBFrontend = $('#whbIframe').contents().find('#webnus-header-builder');\r\n\r\n\t\t\t\t// Frontend Preloader\r\n\t\t\t\tif ($WHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t$WHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t$('.whb_save').css({\r\n\t\t\t\t\t\t'background-color': '#4cbf67',\r\n\t\t\t\t\t\t'box-shadow': '0 3px 10px -3px #4cbf67',\r\n\t\t\t\t\t\t'border-color': '#4cbf67'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.ajax({\r\n\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\taction: 'whb_save_data',\r\n\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\tfrontendComponents: JSON.stringify(frontendComponents),\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\t$('.whb_save').css({\r\n\t\t\t\t\t\t\t\t'background-color': '#008aff',\r\n\t\t\t\t\t\t\t\t'box-shadow': '0 3px 10px -3px #008aff',\r\n\t\t\t\t\t\t\t\t'border-color': '#008aff'\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tvar $newWHBFrontend = $(data);\r\n\r\n\t\t\t\t\t\t\t// Frontend Preloader\r\n\t\t\t\t\t\t\tif ($newWHBFrontend.children('.whb-spinner-wrap').length == 0) {\r\n\t\t\t\t\t\t\t\t$newWHBFrontend.prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t$WHBFrontend[0].outerHTML = $newWHBFrontend[0].outerHTML;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (importButtonFlag) {\r\n\t\t\t\t\t\t\t$('.redux-action_bar input[name=\"redux_save\"], #whb-publish').trigger('click');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\t\t\t\turl: whb_localize.ajaxurl,\r\n\t\t\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\t\t\taction: 'whb_live_dynamic_styles',\r\n\t\t\t\t\t\t\t\t\t\tnonce: whb_localize.nonce,\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\t\t\t\t\twhbInjectStyleToIframe(data);\r\n\t\t\t\t\t\t\t\t\t\t$('#whbIframe').contents().find('#webnus-header-builder').children('.whb-spinner-wrap').remove();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (whbIsFrontendBuilder()) {\r\n\t\t\t\t\t\t\tvar path = whb_localize.assets_url + 'src/frontend/';\r\n\t\t\t\t\t\t\tvar scripts = [\r\n\t\t\t\t\t\t\t\t'whb-jquery-plugins.js',\r\n\t\t\t\t\t\t\t\t'whb-frontend.js',\r\n\t\t\t\t\t\t\t];\r\n\t\t\t\t\t\t\twhbInjectScriptToIframe(path + scripts[0]);\r\n\t\t\t\t\t\t\twhbInjectScriptToIframe(path + scripts[1]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Create Frontend Components Function\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tfunction whbCreateFrontendComponents() {\r\n\t\t\t\tfrontendComponents = $.extend(true, {}, editorComponents);\r\n\t\t\t\tfor (var screen_key in frontendComponents) {\r\n\t\t\t\t\tfor (var rowKey in frontendComponents[screen_key]) {\r\n\t\t\t\t\t\tfor (var cell_key in frontendComponents[screen_key][rowKey]) {\r\n\t\t\t\t\t\t\tvar cell = frontendComponents[screen_key][rowKey][cell_key];\r\n\r\n\t\t\t\t\t\t\tif (cell_key == 'settings') {\r\n\t\t\t\t\t\t\t\tvar elemName = cell.element;\r\n\t\t\t\t\t\t\t\tvar elemID = cell.uniqueId;\r\n\t\t\t\t\t\t\t\tvar component_key = elemName + '_' + elemID;\r\n\r\n\t\t\t\t\t\t\t\tif (component_key in components) {\r\n\t\t\t\t\t\t\t\t\tObject.assign(cell, components[component_key]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tfor (const key in cell) {\r\n\t\t\t\t\t\t\t\t\tif (cell.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\t\t\tconst value = cell[key];\r\n\t\t\t\t\t\t\t\t\t\tif (key != 'hidden_element' && typeof value === 'boolean') {\r\n\t\t\t\t\t\t\t\t\t\t\tcell[key] = String(value);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (cell.length != 0) {\r\n\t\t\t\t\t\t\t\t\tfor (var el of cell) {\r\n\t\t\t\t\t\t\t\t\t\tvar elemName = el.name;\r\n\t\t\t\t\t\t\t\t\t\tvar elemID = el.uniqueId;\r\n\t\t\t\t\t\t\t\t\t\tvar component_key = elemName + '_' + elemID;\r\n\r\n\t\t\t\t\t\t\t\t\t\tif (component_key in components) {\r\n\t\t\t\t\t\t\t\t\t\t\tObject.assign(el, components[component_key]);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tfor (const key in el) {\r\n\t\t\t\t\t\t\t\t\t\t\tif (el.hasOwnProperty(key)) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tconst value = el[key];\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (key != 'hidden_element' && typeof value === 'boolean') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tel[key] = String(value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Import Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t// import button\r\n\t\t\t$(\"#whb-import\").change(function (e) {\r\n\t\t\t\tvar file = event.target.files[0];\r\n\t\t\t\tvar reader = new FileReader();\r\n\t\t\t\treader.onload = onReaderLoad;\r\n\t\t\t\treader.readAsText(file);\r\n\t\t\t});\r\n\r\n\t\t\tfunction onReaderLoad(event) {\r\n\t\t\t\twhbImport(event.target.result);\r\n\t\t\t}\r\n\t\t\t// Import function\r\n\t\t\tfunction whbImport(content) {\r\n\t\t\t\tif (content && (whbIsJson(content) || whbIsObject(content))) {\r\n\t\t\t\t\t$body.css({\r\n\t\t\t\t\t\t'height': '1px',\r\n\t\t\t\t\t\t'overflow': 'hidden'\r\n\t\t\t\t\t}).prepend('<div class=\"whb-spinner-wrap\"><div class=\"whb-spinner\"><div class=\"double-bounce1\"></div><div class=\"double-bounce2\"></div></div></div>');\r\n\t\t\t\t\t$('#wpwrap').css('display', 'none');\r\n\t\t\t\t\tcontent = whbIsJson(content) ? JSON.parse(content) : content;\r\n\t\t\t\t\tcomponents = content.whb_data_components;\r\n\t\t\t\t\teditorComponents = content.whb_data_editor_components;\r\n\t\t\t\t\tfrontendComponents = content.whb_data_frontend_components;\r\n\t\t\t\t\timportButtonFlag = true;\r\n\t\t\t\t\twhbSaveAllData();\r\n\t\t\t\t} else {\r\n\t\t\t\t\talert('Header import input is empty! That\\'s why no data can import.');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Prebuild Button\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\t$wrap.find('.whb-prebuild-item').on('click', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tif (confirm('Your selected header pre-defined will apply on current elements and settings. Are you sure you want to overwrite?')) {\r\n\t\t\t\t\tvar fileName = $(this).data('file-name');\r\n\t\t\t\t\tvar $modal = $('.whb-full-modal');\r\n\t\t\t\t\tvar url = whb_localize.prebuilds_url + fileName;\r\n\r\n\t\t\t\t\t$.ajax({\r\n\t\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\t\ttype: 'POST',\r\n\t\t\t\t\t\turl: url,\r\n\t\t\t\t\t\tsuccess: function (data) {\r\n\t\t\t\t\t\t\tvar content = data;\r\n\t\t\t\t\t\t\twhbImport(content);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t\t/**\r\n\t\t\t * Header Builder - Header Type Switcher Button (Vertical|Horizontal)\r\n\t\t\t * @author\tWEBNUS\r\n\t\t\t * @version\t1.0.0\r\n\t\t\t */\r\n\t\t\tif (editorComponents['desktop-view']['row1']['settings']['header_type'] == 'vertical') {\r\n\t\t\t\tvar $panels = $wrap.find('.whb-tabs-panels');\r\n\t\t\t\tvar $settings = $panels.find('#desktop-view').children('.whb-columns[data-columns=\"row1\"]').children('.whb-elements-item');\r\n\t\t\t\tvar $headerSwitcher = $('#whb-vertical-header');\r\n\r\n\t\t\t\t$settings.attr('data-element', 'vertical-area');\r\n\t\t\t\t$headerSwitcher.find('span').text('Horizontal Header');\r\n\t\t\t\t$panels.addClass('whb-vertical-header-panel');\r\n\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\taxis: 'y'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t$wrap.on('click', '#whb-vertical-header', function (event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\tvar $this = $(this);\r\n\t\t\t\tvar $tabs = $('.whb-tabs-list');\r\n\t\t\t\tvar $panels = $wrap.find('.whb-tabs-panels');\r\n\t\t\t\tvar $settings = $panels.find('#desktop-view').children('.whb-columns[data-columns=\"row1\"]').children('.whb-elements-item');\r\n\t\t\t\tvar desktopRow1Settings = editorComponents['desktop-view'].row1.settings;\r\n\t\t\t\tvar header_type = desktopRow1Settings.header_type;\r\n\r\n\t\t\t\tif (header_type == 'horizontal') {\r\n\t\t\t\t\tdesktopRow1Settings.element = 'vertical-area';\r\n\t\t\t\t\t$settings.attr('data-element', 'vertical-area');\r\n\t\t\t\t\tdesktopRow1Settings.header_type = 'vertical';\r\n\t\t\t\t\t$this.find('span').text('Horizontal Header');\r\n\t\t\t\t\t$panels.addClass('whb-vertical-header-panel');\r\n\t\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\t\taxis: 'y'\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tdesktopRow1Settings.element = 'header-area';\r\n\t\t\t\t\t$settings.attr('data-element', 'header-area');\r\n\t\t\t\t\tdesktopRow1Settings.header_type = 'horizontal';\r\n\t\t\t\t\t$this.find('span').text('Vertical Header');\r\n\t\t\t\t\t$panels.removeClass('whb-vertical-header-panel');\r\n\t\t\t\t\t$desktopSortablePlaces.sortable({\r\n\t\t\t\t\t\taxis: ''\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$('#wrap').removeClass('whb-header-vertical-toggle');\r\n\t\t\t\t}\r\n\r\n\t\t\t\twhbCreateFrontendComponents();\r\n\t\t\t\twhbSaveAllData();\r\n\t\t\t\twhbDebug();\r\n\r\n\t\t\t\t// show desktop panel\r\n\t\t\t\t$tabs.find('li').removeClass('w-active');\r\n\t\t\t\t$tabs.find('li:first-child').addClass('w-active');\r\n\t\t\t\t$('.whb-tab-panel').hide();\r\n\t\t\t\t$('#desktop-view').show();\r\n\t\t\t});\r\n\r\n\t\t\t(function () {\r\n\t\t\t\tif ($('.whb-languages').length) {\r\n\t\t\t\t\t$('.whb-languages').niceSelect();\r\n\t\t\t\t\tvar $select = $('select.whb-languages');\r\n\t\t\t\t\t$select.change(function () {\r\n\t\t\t\t\t\tvar language = $(this).children(\"option:selected\").val();\r\n\t\t\t\t\t\tlocation.replace(window.location.href + '&lang=' + language);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})();\r\n\t\t});\r\n\t}); // end document ready\r\n})(jQuery);"]}