!function(){"use strict";jQuery("document").ready(function(m){var n=m("#commentform");n.attr("aria-live","polite"),n.prepend('<div id="comment-status" aria-live="assertive" role="status" tabindex="-1"></div>');var o,i=m("#comment-status");m("a.comment-reply-link").click(function(){o=m(this).parents(".comment").attr("id")}),n.submit(function(){var e=n.serialize();m("#commentform .deep-free-comment-error").remove(),m("#commentform .deep-free-field-error").remove();var s=!1;if(m("#commentform [aria-required=true]").each(function(){var e=m(this).attr("id")+"-error";if(""==m.trim(m(this).val())){var r=m(this).prev("label").html();m(this).attr("aria-describedby",e),m(this).parent().append(' <span class="deep-free-field-error" id="'+e+'">'+r+": "+deepFreeComments.required+"</span>"),s=!0}if("email"==m(this).attr("name")&&""!=m.trim(m(this).val())){var t=m(this).val();!!/^([\w-\+.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/.test(t)||(m(this).attr("aria-describedby",e),m(this).parent().append(' <span class="deep-free-field-error"id="'+e+'">'+deepFreeComments.emailInvalid+"</span>"),s=!0)}}),s)return i.html('<p class="deep-free-comment-error">'+deepFreeComments.error+"</p>").focus(),!1;i.html('<p class="deep-free-comment-processing">'+deepFreeComments.processing+"</p>");var r=n.attr("action");return m.ajax({type:"post",url:r,data:e,dataType:"json",error:function(e,r,t){i.html('<p class="deep-free-comment-error">'+deepFreeComments.flood+"</p>").focus()},success:function(e,r){var t=e.success,s=e.response,a=e.status;t?(i.html('<p class="deep-free-comment-success" >'+a+"</p>").focus(),0<m("#comments").has("ol.commentlist").length?null!=o?m("#"+o).prepend(s):m(".commentlist").append(s):(m("#comments").append('<ol class="commentlist"></ol>'),m("ol.commentlist").html(s))):i.html('<p class="deep-free-comment-error" >'+deepFreeComments.required+"</p>").focus(),n.find("textarea[name=comment]").val("")}}),!1})})}();